(()=>{"use strict";class e{constructor(e,t,s,i,r,n){this._infoCard=e,this._name=e.name,this._link=e.link,this._templateCard=t,this._pic=e,this._handleCardClick=s,this._openF=i,this._likes=e.likes,this._ownerId=this._infoCard.ownerId,this._userLiked=this._likes.some((e=>e._id===this._ownerId)),this._cardId=e._id,this._sendLikeApi=r,this._deleteLikeApi=n}createCard(){return this._card=this._templateCard.content.firstElementChild.cloneNode(!0),this._card.querySelector(".element__pic").src=this._link,this._card.querySelector(".element__title-text").textContent=this._name,this._card.querySelector(".element__pic").alt=this._name,this._likeBtn=this._card.querySelector(".element__title-like"),this._likeNum=this._card.querySelector(".element__title-like-num"),this._likeNum.textContent=this._likes.length,this._isUserOwner()||this._card.querySelector(".element__bin").remove(),this._userLiked&&this._likeBtn.classList.add("element__title-like_active"),this._addListeners(),this._card}_isCardLiked(){this._userLiked=this._likes.some((e=>e._id===this._ownerId))}_isUserOwner(){if(this._infoCard.owner._id===this._ownerId)return!0}_addListeners(){this._likeBtn.addEventListener("click",(()=>{this._userLiked?this._deleteLikeApi(this._infoCard):this._sendLikeApi(this._infoCard)})),this._isUserOwner()&&this._card.querySelector(".element__bin").addEventListener("click",(()=>this._openF(this._infoCard,this._card))),this._card.querySelector(".element__pic").addEventListener("click",(()=>{this._handleCardClick(this._pic)}))}handlerLike(e){this._likeBtn.classList.toggle("element__title-like_active"),this._likeNum.textContent=e.likes.length,this._userLiked=!this._userLiked}removeCard(){this._card.remove(),this._card=null}sendLikeApi(e){this._sendLikeApi=e}deleteLikeApi(e){this._deleteLikeApi=e}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._popupForm=t,this._inputList=Array.from(this._popupForm.querySelectorAll(this._inputSelector)),this._saveBtn=this._popupForm.querySelector(this._submitButtonSelector)}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._popupForm.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._popupForm.querySelector(`.${e.id}-error`);t.classList.remove(this._errorClass),t.textContent="",e.classList.remove(this._inputErrorClass)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}enableValidation(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableButton(){this._saveBtn.classList.add(this._inactiveButtonClass),this._saveBtn.disabled=!0}_enableButton(){this._saveBtn.classList.remove(this._inactiveButtonClass),this._saveBtn.disabled=!1}_toggleButtonState(){this._hasInputsValid()?this.disableButton():this._enableButton()}_hasInputsValid(){return this._inputList.some((e=>!e.validity.valid))}resetTextError(){this._inputList.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){this._popup=document.querySelector(e),this._closeBtn=this._popup.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closePressOverlay(e){e.currentTarget===e.target&&this.close()}setEventListeners(){this._closeBtn.addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>this._closePressOverlay(e)))}}class i extends s{constructor(e,t){super(e),this._inputsList=this._popup.querySelectorAll(".popup__input"),this._form=this._popup.querySelector(".popup__form"),this._apiCallBack=t,this._submitBtn=this._popup.querySelector(".popup__save-button")}_getInputValues(){return this._data={},this._inputsList.forEach((e=>{this._data[e.name]=e.value})),this._data}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this.submitHandler)}close(){super.close(),this._form.reset()}submitHandler=()=>{const e=this._getInputValues();this._apiCallBack(e)};loadingInProcess(){this._submitBtn.textContent="Сохранение..."}loadingDone(e){this._submitBtn.textContent=e}}const r=document.querySelector(".popup__form-profile"),n=document.querySelector(".popup__form-place"),o=document.querySelector(".popup__form-avatar"),a=document.querySelector("#element-template"),l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__form_type_error",errorClass:"popup__error-text_status_active"},c=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),h=document.querySelector(".profile__avatar-edit"),d=document.querySelector(".popup__input_field_name"),u=document.querySelector(".popup__input_field_occupation");let p;const m=new t(l,r),v=new t(l,n),k=new t(l,o),L=new class{constructor({baseUrl:e,headers:t}){this._url=e,this._headers=t}getInfo(){return fetch(`${this._url}users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getCards(){return fetch(`${this._url}cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}sendNewProfileData(e){return fetch(`${this._url}users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}sendNewCardData(e){return fetch(`${this._url}cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._url}cards/${e._id}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}changeAvatar(e){return fetch(`${this._url}users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}sendLike(e){return fetch(`${this._url}cards/${e._id}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._url}cards/${e._id}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"6f7d4ee2-1133-493f-8dc5-cde7a586dd12","Content-Type":"application/json"}});Promise.all([L.getInfo(),L.getCards()]).then((e=>{const t=e[0],s=e[1];p=t._id,s.forEach((e=>{e.ownerId=t._id})),B.rendererCards(s),C.setUserInfo(t),C.setUserAvatar(t),function(){const e=document.querySelector(".preloader");e.classList.add("preloader_status_hiding"),setTimeout((function(){e.classList.add("preloader_status_hidden"),e.classList.remove("preloader_status_hiding")}),500)}()})).catch((e=>console.log(e)));const f=new class extends s{constructor(e){super(e),this._submit=this._popup.querySelector(".popup__save-button")}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){super.setEventListeners()}close(){super.close(),this._submit.removeEventListener("click",this._handleSubmitCallback)}submit(){this._submit.addEventListener("click",this._handleSubmitCallback)}loadingInProcess(){this._submit.textContent="Удаление..."}loadingDone(){this._submit.textContent="Да"}disableSubmitBtn(){this._submit.disabled=!0}enableSubmitBtn(){this._submit.disabled=!1}}(".popup_type_delete-confirm");f.setEventListeners();const b=new i(".popup_type_avatar-edit",(function(e){b.loadingInProcess(),L.changeAvatar(e).then((e=>{C.setUserAvatar(e),b.close()})).catch((e=>console.log(e))).finally((()=>b.loadingDone("Сохранить")))}));b.setEventListeners();const C=new class{constructor({nameSelector:e,occupationSelector:t,avatarSelector:s}){this._name=document.querySelector(e),this._occupation=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._occupation.textContent}}setUserInfo(e){this._name.textContent=e.name,this._occupation.textContent=e.about}setUserAvatar(e){this._avatar.src=e.avatar}}({nameSelector:".profile__title",occupationSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),S=new i(".popup_type_profile-edit",(function(e){S.loadingInProcess(),L.sendNewProfileData(e).then((e=>{C.setUserInfo(e),S.close()})).catch((e=>console.log(e))).finally((()=>S.loadingDone("Сохранить")))}));S.setEventListeners();const E=new i(".popup_type_new-card",(function(e){E.loadingInProcess(),L.sendNewCardData(e).then((e=>{e.ownerId=p,B.addItem(w(e)),E.close()})).catch((e=>console.log(e))).finally((()=>E.loadingDone("Сохранить")))}));function y(e,t){f.setSubmitAction((()=>{f.loadingInProcess(),f.disableSubmitBtn(),L.deleteCard(e,t).then((()=>{t.remove(),t=null,f.close()})).catch((e=>console.log(e))).finally((()=>f.loadingDone("Да")))})),f.enableSubmitBtn(),f.open(),f.submit()}E.setEventListeners();const g=new class extends s{constructor(e){super(e),this._image=this._popup.querySelector(".popup__img"),this._caption=this._popup.querySelector(".popup__img-title")}open(e){super.open(),this._caption.textContent=e.name,this._image.src=e.link,this._image.alt=e.name}}(".popup_type_view-image");g.setEventListeners();const B=new class{constructor(e,t){this._renderer=e,this._container=document.querySelector(t)}rendererCards(e){e.reverse().forEach((e=>(this.addItem(this._renderer(e)),e)))}addItem(e){this._container.prepend(e)}}(w,".elements");function q(e){g.open(e)}function w(t){const s=((...t)=>new e(...t))(t,a,q,y);return s.sendLikeApi((()=>{L.sendLike(t).then((e=>{s.handlerLike(e)})).catch((e=>console.log(e)))})),s.deleteLikeApi((()=>{L.deleteLike(t).then((e=>{s.handlerLike(e)})).catch((e=>console.log(e)))})),s.createCard()}c.addEventListener("click",(()=>{const e=C.getUserInfo();d.value=e.name,u.value=e.about,S.open(),m.resetTextError()})),h.addEventListener("click",(()=>{b.open(),b.loadingDone("Сохранить"),k.resetTextError()})),_.addEventListener("click",(()=>{E.open(),v.resetTextError()})),m.enableValidation(),v.enableValidation(),k.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VTdILFNBQVFpRixJQUN0QmhLLEtBQUtpTSxRQUFRak0sS0FBSzBNLFVBQVUxQyxJQUNyQkEsS0FLWGlDLFFBQVFqQyxHQUNOaEssS0FBSzJNLFdBQVdFLFFBQVE3QyxLTHFIU2tDLEVBQW1CLGFBRXhELFNBQVN0TSxFQUFnQjJNLEdBQ3ZCSCxFQUFhcEcsS0FBS3VHLEdBOEJwQixTQUFTTCxFQUFtQjFHLEdBQzFCLE1BQU13RSxFQW5IbUIsS0FBSThDLElBQVEsSUFBSXROLEtBQVFzTixHQW1IcENDLENBQ1h2SCxFQUNBbUMsRUFDQS9ILEVBQ0F1TSxHQWlCRixPQWZBbkMsRUFBS2xLLGFBQVksS0FDZnNJLEVBQUl2RixTQUFTMkMsR0FDWm9ELE1BQUtsRyxJQUNKc0gsRUFBS3ZILFlBQVlDLE1BRWxCK0gsT0FBTUMsR0FBT0MsUUFBUUMsSUFBSUYsUUFFNUJWLEVBQUtqSyxlQUFjLEtBQ2pCcUksRUFBSXRGLFdBQVcwQyxHQUNkb0QsTUFBS2xHLElBQ0pzSCxFQUFLdkgsWUFBWUMsTUFFbEIrSCxPQUFNQyxHQUFPQyxRQUFRQyxJQUFJRixRQUdyQlYsRUFBSzNJLGFBaERkdUcsRUFBZXBGLGlCQUFpQixTQUFTLEtBQ3ZDLE1BQU1zSCxFQUFXSyxFQUFLeUIsY0FDdEI3RCxFQUFVZCxNQUFRNkMsRUFBUzNKLEtBQzNCNkgsRUFBU2YsTUFBUTZDLEVBQVMrQixNQUMxQkUsRUFBaUIvRixPQUNqQmlDLEVBQXNCMUMsb0JBSXhCdUMsRUFBY3RGLGlCQUFpQixTQUFTLEtBQ3RDNkksRUFBZ0JyRixPQUNoQnFGLEVBQWdCL0QsWUFBWSxhQUM1QmEsRUFBcUI1QyxvQkFHdkJzQyxFQUFXckYsaUJBQWlCLFNBQVMsS0FDbkN3SixFQUFnQmhHLE9BQ2hCa0MsRUFBc0IzQyxvQkFJeEIwQyxFQUFzQmpELG1CQUN0QmtELEVBQXNCbEQsbUJBQ3RCbUQsRUFBcUJuRCxvQiIsInNvdXJjZXMiOlsid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQ2FyZC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvdXRpbHMvY29uc3RhbnRzLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2luZGV4LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvVXNlckluZm8uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FyZCB7XG5cbiAgY29uc3RydWN0b3IoaW5mb0NhcmQsIHRlbXBsYXRlQ2FyZCwgaGFuZGxlQ2FyZENsaWNrLCBvcGVuRiwgc2VuZExpa2VBcGksIGRlbGV0ZUxpa2VBcGkpIHtcbiAgICB0aGlzLl9pbmZvQ2FyZCA9IGluZm9DYXJkXG4gICAgdGhpcy5fbmFtZSA9IGluZm9DYXJkLm5hbWU7XG4gICAgdGhpcy5fbGluayA9IGluZm9DYXJkLmxpbms7XG4gICAgdGhpcy5fdGVtcGxhdGVDYXJkID0gdGVtcGxhdGVDYXJkO1xuICAgIHRoaXMuX3BpYyA9IGluZm9DYXJkO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9vcGVuRiA9IG9wZW5GO1xuICAgIHRoaXMuX2xpa2VzID0gaW5mb0NhcmQubGlrZXM7XG4gICAgdGhpcy5fb3duZXJJZCA9IHRoaXMuX2luZm9DYXJkLm93bmVySWQvLydhZTg1YzRlZjk5N2YwMWYzM2YxMTNhZjcnIC8v0JzQvtC5IHVzZXJJRFxuICAgIHRoaXMuX3VzZXJMaWtlZCA9IHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiBsaWtlLl9pZCA9PT0gdGhpcy5fb3duZXJJZCkvLyDQkdGD0LTQtdGCIHRydWUg0LXRgdC70Lgg0LXRgdGC0Ywg0LzQvtC5INC70LDQudC6XG4gICAgdGhpcy5fY2FyZElkID0gaW5mb0NhcmQuX2lkLy9JRCDQutCw0YDRgtC+0YfQutC4XG4gICAgdGhpcy5fc2VuZExpa2VBcGkgPSBzZW5kTGlrZUFwaTtcbiAgICB0aGlzLl9kZWxldGVMaWtlQXBpID0gZGVsZXRlTGlrZUFwaVxuICB9XG5cbiAgY3JlYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkID0gdGhpcy5fdGVtcGxhdGVDYXJkLmNvbnRlbnQuZmlyc3RFbGVtZW50Q2hpbGQuY2xvbmVOb2RlKHRydWUpO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BpYycpLnNyYyA9IHRoaXMuX2xpbms7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUtdGV4dCcpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19waWMnKS5hbHQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2xpa2VCdG4gPSB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZS1saWtlJyk7XG4gICAgdGhpcy5fbGlrZU51bSA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlLWxpa2UtbnVtJyk7XG4gICAgdGhpcy5fbGlrZU51bS50ZXh0Q29udGVudCA9IHRoaXMuX2xpa2VzLmxlbmd0aDtcblxuICAgIC8v0KPQtNCw0LvRj9C10YIg0LLQtdC00LXRgNC60L4g0LXRgdC70Lgg0LrQsNGA0YLQvtGH0LrQsCDQvdC1INC80L7Rj1xuICAgIGlmICghdGhpcy5faXNVc2VyT3duZXIoKSkge1xuICAgICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fYmluJykucmVtb3ZlKCk7XG4gICAgfTtcblxuICAgIC8v0JfQsNC60YDQsNGI0LjQstCw0LXRgiDRgdC10YDQtNC10YfQutC+INC10YHQu9C4INC70LDQudC6INC80L7QuVxuICAgIGlmICh0aGlzLl91c2VyTGlrZWQpIHtcbiAgICAgIHRoaXMuX2xpa2VCdG4uY2xhc3NMaXN0LmFkZCgnZWxlbWVudF9fdGl0bGUtbGlrZV9hY3RpdmUnKTtcbiAgICB9O1xuXG4gICAgdGhpcy5fYWRkTGlzdGVuZXJzKCk7XG4gICAgcmV0dXJuIHRoaXMuX2NhcmQ7XG4gIH1cblxuICAvL9CS0LXRgNC90LXRgiB0cnVlINC10YHQu9C4INGB0YDQtdC00Lgg0LvQsNC50LrQvtCyINC10YHRgtGMINC80L7QuSDQu9Cw0LnQulxuICBfaXNDYXJkTGlrZWQoKSB7XG4gICB0aGlzLl91c2VyTGlrZWQgPSB0aGlzLl9saWtlcy5zb21lKGxpa2UgPT4ge1xuICAgICByZXR1cm4gbGlrZS5faWQgPT09IHRoaXMuX293bmVySWQ7XG4gICB9KVxuICB9XG5cbiAgX2lzVXNlck93bmVyKCkge1xuICAgIGlmICh0aGlzLl9pbmZvQ2FyZC5vd25lci5faWQgPT09IHRoaXMuX293bmVySWQpIHtcbiAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cbiAgfVxuXG4gIC8v0JTQvtCx0LDQstC70LXQvdC40LUg0YHQu9GD0YjQsNGC0LXQu9C10Lkg0Log0LrQsNGA0YLQvtGH0LrQtVxuICBfYWRkTGlzdGVuZXJzKCkge1xuXG4gICAgdGhpcy5fbGlrZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIGlmICghdGhpcy5fdXNlckxpa2VkKSB7XG4gICAgICAgIHRoaXMuX3NlbmRMaWtlQXBpKHRoaXMuX2luZm9DYXJkKVxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fZGVsZXRlTGlrZUFwaSh0aGlzLl9pbmZvQ2FyZClcbiAgICAgIH1cbiAgICB9KTtcblxuICAgIGlmICh0aGlzLl9pc1VzZXJPd25lcigpKSB7XG4gICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19iaW4nKS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuX29wZW5GKHRoaXMuX2luZm9DYXJkLCB0aGlzLl9jYXJkKSk7XG4gICAgfVxuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BpYycpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrKHRoaXMuX3BpYylcbiAgICB9KVxuICB9XG5cbiAgaGFuZGxlckxpa2UocmVzKSB7XG4gICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QudG9nZ2xlKCdlbGVtZW50X190aXRsZS1saWtlX2FjdGl2ZScpO1xuICAgIHRoaXMuX2xpa2VOdW0udGV4dENvbnRlbnQgPSByZXMubGlrZXMubGVuZ3RoXG4gICAgdGhpcy5fdXNlckxpa2VkID0gIXRoaXMuX3VzZXJMaWtlZDtcbiAgfVxuXG4gIHJlbW92ZUNhcmQoKSB7XG4gICAgdGhpcy5fY2FyZC5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkID0gbnVsbDtcbiAgfVxuXG4gIHNlbmRMaWtlQXBpKHNlbmRMaWtlKSB7XG4gICAgdGhpcy5fc2VuZExpa2VBcGkgPSBzZW5kTGlrZTtcbiAgfVxuXG4gIGRlbGV0ZUxpa2VBcGkoZGVsZXRlTGlrZSkge1xuICAgIHRoaXMuX2RlbGV0ZUxpa2VBcGkgPSBkZWxldGVMaWtlO1xuICB9XG5cbn1cblxuXG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9ye1xuICBjb25zdHJ1Y3RvcihzZXR0aW5ncywgZm9ybSkge1xuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IHNldHRpbmdzLmZvcm1TZWxlY3RvcjsgLy/QodCw0LzQsCDRhNC+0YDQvNCwXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IHNldHRpbmdzLmlucHV0U2VsZWN0b3I7IC8v0J/QvtC70LUg0LLQstC+0LTQsCDQtNCw0L3QvdGL0YVcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IHNldHRpbmdzLnN1Ym1pdEJ1dHRvblNlbGVjdG9yOyAvL9Ca0L3QvtC/0LrQsCDRgdC+0YXRgNCw0L3QtdC90LjRjyDRhNC+0YDQvNGLXG4gICAgdGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyA9IHNldHRpbmdzLmluYWN0aXZlQnV0dG9uQ2xhc3M7IC8v0JrQu9Cw0YHRgSDQvdC10LDQutGC0LjQstC90L7QuSDQutC90L7Qv9C60LhcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBzZXR0aW5ncy5pbnB1dEVycm9yQ2xhc3M7IC8v0JrQu9Cw0YHRgSDQtNC10LvQsNC10YIg0L/QvtC00YfQtdGA0LrQuNCy0LDQvdC40LUg0LrRgNCw0YHQvdGL0Lwg0L7RiNC40LHQutC4INCyINC/0L7QtdC7INCy0LLQvtC00LBcbiAgICB0aGlzLl9lcnJvckNsYXNzID0gc2V0dGluZ3MuZXJyb3JDbGFzczsgLy/QmtC70LDRgdGBINC00LXQu9Cw0LXRgiDRgtC10LrRgdGCINC+0YjQuNCx0LrQuCDQstC40LTQuNC80YvQvFxuICAgIHRoaXMuX3BvcHVwRm9ybSA9IGZvcm07IC8v0KTQvtGA0LzQsCwg0L7RgtC60YPQtNCwINGPINC80L7Qs9GDINCy0LfRj9GC0Ywg0LLRgdC1INGN0LvQtdC80LXQvdGC0Ysg0YTQvtGA0LzRi1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20odGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5faW5wdXRTZWxlY3RvcikpOyAvLyDQodC/0LjRgdC+0Log0LLRgdC10YUg0L/QvtC70LXQuSDQstCy0L7QtNCwINC00LDQvdC90YvRhVxuICAgIHRoaXMuX3NhdmVCdG4gPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3Rvcih0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3Rvcik7IC8v0JrQvdC+0L/QutCwINGB0L7RhdGA0LDQvdC40YLRjFxuICB9XG4gIC8v0J/RgNC+0LLQtdGA0LrQsCDQstCw0LvQuNC00L3QvtGB0YLQuCDQuNC90L/Rg9GC0LBcbiAgX2lzVmFsaWQoaW5wdXQpIHtcbiAgICBpZiAoIWlucHV0LnZhbGlkaXR5LnZhbGlkKSB7XG4gICAgICB0aGlzLl9zaG93SW5wdXRFcnJvcihpbnB1dCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9XG4gIH1cbiAgLy/Qn9C+0LrQsNC30LDRgtGMINC+0YjQuNCx0LrRgyDQuNC90L/Rg9GC0LBcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApOyAvL9Cd0LDRiNC70Lgg0LHQu9C+0Log0L7RiNC40LHQutC4IHNwYW5cbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSBpbnB1dC52YWxpZGF0aW9uTWVzc2FnZTsgLy/QktGB0YLQsNCy0LjQu9C4INGC0LXQutGB0YIg0L7RiNC40LHQutC4INCyINCx0LvQvtC6INC+0YjQuNCx0LrQuCBzcGFuXG4gICAgZm9ybUVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7IC8v0JTQvtCx0LDQstC40LvQuCDQutC70LDRgdGBINCy0LjQtNC40LzQvtGB0YLQuCDQsdC70L7QutGDINC+0YjQuNCx0LrQuCBzcGFuXG4gICAgaW5wdXQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpOyAvL9Cf0L7QtNGH0LXRgNC60L3Rg9C70Lgg0LrRgNCw0YHQvdGL0Lwg0L/QvtC70LUg0LjQvdC/0YPRgtCwXG4gIH07XG4gIC8v0KHQutGA0YvRgtGMINC+0YjQuNCx0LrRgyDQuNC90L/Rg9GC0LBcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0KSB7XG4gICAgY29uc3QgZm9ybUVycm9yID0gdGhpcy5fcG9wdXBGb3JtLnF1ZXJ5U2VsZWN0b3IoYC4ke2lucHV0LmlkfS1lcnJvcmApOyAvL9Cd0LDRiNC70Lgg0LHQu9C+0Log0L7RiNC40LHQutC4IHNwYW5cbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9lcnJvckNsYXNzKTsgLy/Qo9C00LDQu9C40LvQuCDQutC70LDRgdGBINCy0LjQtNC40LzQvtGB0YLQuCDQsdC70L7QutCwINC+0YjQuNCx0LrQuCBzcGFuXG4gICAgZm9ybUVycm9yLnRleHRDb250ZW50ID0gJyc7IC8v0J7Rh9C40YHRgtC40LvQuCDRgdC+0LTQtdGA0LbQuNC80L7QtSDQsdC70L7QutCwINC+0YjQuNCx0LrQuCBzcGFuXG4gICAgaW5wdXQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbnB1dEVycm9yQ2xhc3MpOyAvL9Cj0LHRgNCw0LvQuCDQv9C+0LTRh9C10YDQutC40LLQsNC90LjQtSDQutGA0LDRgdC90YvQvCDQv9C+0LvQtSDQuNC90L/Rg9GC0LBcbiAgfTtcbiAgLy8g0KTRg9C90LrRhtC40Y8g0LTQvtCx0LDQstC70Y/QtdGCINGB0LvRg9GI0LDRgtC10LvRjyDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdC+0LHRi9GC0LjRjyDQtNC70Y8g0LrQsNC20LTQvtCz0L4g0L/QvtC70Y8g0LLQstC+0LTQsFxuICBfc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgLy8g0JTQtdC70LDQtdC8INC60L3QvtC/0LrRgyDQodC+0YXRgNCw0L3QuNGC0Ywg0L3QtdCw0LrRgtC40LLQvdC+0Lkg0L/RgNC4INC+0YLQutGA0YvRgtC40Lgg0YTQvtGA0LzRi1xuICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XG5cbiAgICAvLyDQntCx0L7QudC00ZHQvCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDQv9C+0LvRg9GH0LXQvdC90L7QuSDQutC+0LvQu9C10LrRhtC40LhcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIC8vINC60LDQttC00L7QvNGDINC/0L7Qu9GOINC00L7QsdCw0LLQuNC8INC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPIGlucHV0XG4gICAgICBcbiAgICAgIGlucHV0LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9pc1ZhbGlkKGlucHV0KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gIH07XG5cbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl9wb3B1cEZvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4ge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgLy/QlNC10LDQutGC0LjQstCw0YbQuNGPINC60L3QvtC/0LrQuCDQodC+0YXRgNCw0L3QuNGC0YxcbiAgLy/QodC00LXQu9Cw0YLRjCDQutC90L7Qv9C60YMg0KHQvtGF0YDQsNC90LjRgtGMINC90LXQsNC60YLQuNCy0L3QvtC5XG4gIGRpc2FibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc2F2ZUJ0bi5jbGFzc0xpc3QuYWRkKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpOyAvLyDQlNC+0LHQsNCy0LvRj9C10YIg0L3QtdCw0LrRgtC40LLQvdGL0Lkg0LrQu9Cw0YHRgVxuICAgIHRoaXMuX3NhdmVCdG4uZGlzYWJsZWQgPSB0cnVlOyAvL9Ce0YLQutC70Y7Rh9Cw0LXRgiDQutC90L7Qv9C60YNcbiAgfVxuICAvL9Ch0LTQtdC70LDRgtGMINC60L3QvtC/0LrRgyDQodC+0YXRgNCw0L3QuNGC0Ywg0LDQutGC0LjQstC90L7QuVxuICBfZW5hYmxlQnV0dG9uKCkge1xuICAgIHRoaXMuX3NhdmVCdG4uY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTsvLyDQo9C00LDQu9GP0LXRgiDQvdC10LDQutGC0LjQstC90YvQuSDQutC70LDRgdGBXG4gICAgdGhpcy5fc2F2ZUJ0bi5kaXNhYmxlZCA9IGZhbHNlOyAvL9CS0LrQu9GO0YfQsNC10YIg0LrQvdC+0L/QutGDXG4gIH1cbiAgLy/QkNC60YLQuNCy0LDRhtC40Y8g0Lgg0LTQtdCw0LrRgtC40LLQsNGG0LjRjyDQutC90L7Qv9C60Lgg0KHQvtGF0YDQsNC90LjRgtGMINC40YHRhdC+0LTRjyDQuNC3INC40YLQvtCz0L7QsiDQv9GA0L7QstC10YDQutC4INC40L3Qv9GD0YLQvtCyXG4gIF90b2dnbGVCdXR0b25TdGF0ZSgpIHtcbiAgICBjb25zdCBmb3JtVmFsaWQgPSB0aGlzLl9oYXNJbnB1dHNWYWxpZCgpXG4gICAgaWYgKGZvcm1WYWxpZCkge1xuICAgICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2VuYWJsZUJ1dHRvbigpO1xuICAgIH1cbiAgfVxuICAvL9Cf0YDQvtCy0LXRgNGP0LXQvCDQstGB0LUg0LjQvdC/0YPRgtGLINC90LAg0LLQsNC70LjQtNC90L7RgdGC0Ywg0LIg0YTQvtGA0LzQtVxuICBfaGFzSW5wdXRzVmFsaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lucHV0TGlzdC5zb21lKChpbnB1dCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dC52YWxpZGl0eS52YWxpZDtcbiAgICB9KVxuICB9XG5cbiAgcmVzZXRUZXh0RXJyb3IoKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICB0aGlzLl9oaWRlSW5wdXRFcnJvcihpdGVtKTtcbiAgICB9KTtcbiAgfVxuXG59XG5cblxuXG5cblxuXG4iLCIvL9C+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0LrRgNGL0YLQuNC1INC4INC30LDQutGA0YvRgtC40LUg0L/QvtC/0LDQv9CwXG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcil7XG4gICAgdGhpcy5fcG9wdXAgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2Nsb3NlQnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jbG9zZS1idXR0b24nKTtcbiAgICAvL3RoaXMuY2xvc2UgPSB0aGlzLmNsb3NlLmJpbmQodGhpcyk7XG4gICAgLy90aGlzLm9wZW4gPSB0aGlzLm9wZW4uYmluZCh0aGlzKTtcbiAgICB0aGlzLl9oYW5kbGVFc2NDbG9zZSA9IHRoaXMuX2hhbmRsZUVzY0Nsb3NlLmJpbmQodGhpcyk7XG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gICAgXG4gIH1cblxuICBjbG9zZSgpIHtcbiAgICB0aGlzLl9wb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgdGhpcy5jbG9zZSgpO1xuICAgIH07XG4gIH1cblxuICBfY2xvc2VQcmVzc092ZXJsYXkoZXZ0KSB7XG4gICAgICBpZiAoZXZ0LmN1cnJlbnRUYXJnZXQgPT09IGV2dC50YXJnZXQpIHtcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xuICAgICAgfVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgdGhpcy5fY2xvc2VCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlZG93bicsIChldnQpPT4gdGhpcy5fY2xvc2VQcmVzc092ZXJsYXkoZXZ0KSk7XG4gIH1cbn1cblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXB7XG4gIGNvbnN0cnVjdG9yKCBwb3B1cFNlbGVjdG9yLCBhcGlDYWxsQmFjaykge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2lucHV0c0xpc3QgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXBfX2lucHV0Jyk7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2FwaUNhbGxCYWNrID0gYXBpQ2FsbEJhY2s7XG4gICAgdGhpcy5fc3VibWl0QnRuID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19zYXZlLWJ1dHRvbicpXG4gIH1cblxuICAvL9C80LXRgtC+0LQg0LrQvtGC0L7RgNGL0Lkg0YHQvtCx0LjRgNCw0LXRgiDQtNCw0L3QvdGL0LUg0LLRgdC10YUg0L/QvtC70LXQuSDRhNC+0YDQvNGLXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9kYXRhID0ge31cbiAgICB0aGlzLl9pbnB1dHNMaXN0LmZvckVhY2goKGlucHV0KSA9PiB7XG4gICAgICB0aGlzLl9kYXRhW2lucHV0Lm5hbWVdID0gaW5wdXQudmFsdWU7XG4gICAgfSk7XG4gICAgcmV0dXJuIHRoaXMuX2RhdGE7XG4gIH1cblxuICAvL9Cf0LXRgNC10LfQsNC/0LjRgdGL0LLQsNC10YIg0YDQvtC00LjRgtC10LvRjNGB0LrQuNC5INC80LXRgtC+0LQgc2V0RXZlbnRMaXN0ZW5lcnMuINCc0LXRgtC+0LQgc2V0RXZlbnRMaXN0ZW5lcnMg0LrQu9Cw0YHRgdCwIFBvcHVwV2l0aEZvcm0g0LTQvtC70LbQtdC9INC90LUg0YLQvtC70YzQutC+INC00L7QsdCw0LLQu9GP0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDQutC70LjQutCwINC40LrQvtC90LrQtSDQt9Cw0LrRgNGL0YLQuNGPLCDQvdC+INC4INC00L7QsdCw0LLQu9GP0YLRjCDQvtCx0YDQsNCx0L7RgtGH0LjQuiDRgdCw0LHQvNC40YLQsCDRhNC+0YDQvNGLLlxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgdGhpcy5zdWJtaXRIYW5kbGVyKTtcbiAgfVxuXG4gIC8v0J/QtdGA0LXQt9Cw0L/QuNGB0YvQstCw0LXRgiDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LzQtdGC0L7QtCBjbG9zZSwg0YLQsNC6INC60LDQuiDQv9GA0Lgg0LfQsNC60YDRi9GC0LjQuCDQv9C+0L/QsNC/0LAg0YTQvtGA0LzQsCDQtNC+0LvQttC90LAg0LXRidGRINC4INGB0LHRgNCw0YHRi9Cy0LDRgtGM0YHRjy5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cblxuICAvL9Cc0LXRgtC+0LQsINC60L7RgtC+0YDRi9C5INC+0YLQv9GA0LDQstC70Y/QtdGCINGB0L7QsdGA0LDQvdC90YvQtSDQtNCw0L3QvdGL0LUg0L3QsCDRgdC10YDQstC10YBcbiAgc3VibWl0SGFuZGxlciA9ICgpID0+IHtcbiAgICBjb25zdCBpbmZvID0gdGhpcy5fZ2V0SW5wdXRWYWx1ZXMoKTsgLy/QsdC10YDQtdC8INGB0L7QsdGA0LDQvdC90YvQtSDQtNCw0L3QvdGL0LUg0Lgg0YHQvtGF0YDQsNC90Y/QtdC8INCyINC/0LXRgNC10LzQtdC90L3Rg9GOXG4gICAgdGhpcy5fYXBpQ2FsbEJhY2soaW5mbyk7IC8v0JLRi9C30YvQstCw0Y4g0LzQtdGC0L7QtCBhcGlDYWxsQmFja1xuICB9XG5cbiAgbG9hZGluZ0luUHJvY2VzcygpIHtcbiAgICB0aGlzLl9zdWJtaXRCdG4udGV4dENvbnRlbnQgPSAn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nO1xuICB9XG5cbiAgbG9hZGluZ0RvbmUodGV4dCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IHRleHQ7XG4gIH1cblxufVxuXG5cblxuIiwiXG5leHBvcnQgY29uc3QgZm9ybUVsZW1lbnRQcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLXByb2ZpbGUnKTtcbmV4cG9ydCBjb25zdCBmb3JtTmV3UGxhY2UgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0tcGxhY2UnKTtcbmV4cG9ydCBjb25zdCBmb3JtQXZhdGFyRWRpdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1hdmF0YXInKTtcbmV4cG9ydCBjb25zdCBjYXJkVGVtcGxhdGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcjZWxlbWVudC10ZW1wbGF0ZScpO1xuZXhwb3J0IGNvbnN0IHNldHRpbmdzID0ge1xuICBmb3JtU2VsZWN0b3I6ICcucG9wdXBfX2Zvcm0nLFxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dCcsXG4gIHN1Ym1pdEJ1dHRvblNlbGVjdG9yOiAnLnBvcHVwX19zYXZlLWJ1dHRvbicsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZS1idXR0b25faW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9fZm9ybV90eXBlX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19lcnJvci10ZXh0X3N0YXR1c19hY3RpdmUnXG59O1xuZXhwb3J0IGNvbnN0IG15VG9rZW4gPSAnNmY3ZDRlZTItMTEzMy00OTNmLThkYzUtY2RlN2E1ODZkZDEyJztcbmV4cG9ydCBjb25zdCBwcm9maWxlT3BlbkJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGNhcmRBZGRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpO1xuZXhwb3J0IGNvbnN0IGF2YXRhckVkaXRCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWVkaXQnKTtcbmV4cG9ydCBjb25zdCBuYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2lucHV0X2ZpZWxkX25hbWUnKTtcbmV4cG9ydCBjb25zdCBqb2JJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfb2NjdXBhdGlvbicpO1xuXG5cblxuXG4iLCJpbXBvcnQgJy4vcGFnZXMvaW5kZXguY3NzJztcbmltcG9ydCBDYXJkIGZyb20gJy4vY29tcG9uZW50cy9DYXJkLmpzJztcbmltcG9ydCBGb3JtVmFsaWRhdG9yIGZyb20gJy4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzJztcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4vY29tcG9uZW50cy9TZWN0aW9uLmpzJztcbmltcG9ydCBQb3B1cFdpdGhJbWFnZSBmcm9tICcuL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanMnO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSAnLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gJy4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XG5pbXBvcnQgQXBpIGZyb20gJy4vY29tcG9uZW50cy9BcGkuanMnO1xuaW1wb3J0IFBvcHVwV2l0aFN1Ym1pdCBmcm9tICcuL2NvbXBvbmVudHMvUG9wdXBXaXRoU3VibWl0LmpzJztcbmltcG9ydCB7IGZvcm1FbGVtZW50UHJvZmlsZSwgZm9ybU5ld1BsYWNlLCBmb3JtQXZhdGFyRWRpdCwgY2FyZFRlbXBsYXRlLCBzZXR0aW5ncywgbXlUb2tlbiwgcHJvZmlsZU9wZW5CdG4sIGNhcmRBZGRCdG4sIGF2YXRhckVkaXRCdG4sIG5hbWVJbnB1dCwgam9iSW5wdXR9IGZyb20gJy4vdXRpbHMvY29uc3RhbnRzLmpzJztcblxuZnVuY3Rpb24gaGlkZVByZWxvYWRlcigpIHtcbiAgY29uc3QgcHJlbG9hZGVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByZWxvYWRlcicpO1xuICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgncHJlbG9hZGVyX3N0YXR1c19oaWRpbmcnKTtcbiAgc2V0VGltZW91dChmdW5jdGlvbigpIHtcbiAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LmFkZCgncHJlbG9hZGVyX3N0YXR1c19oaWRkZW4nKTtcbiAgICBwcmVsb2FkZXIuY2xhc3NMaXN0LnJlbW92ZSgncHJlbG9hZGVyX3N0YXR1c19oaWRpbmcnKTtcbiAgfSwgNTAwKTtcbn1cblxubGV0IG93bmVySWQ7XG5cbi8v0KTQvtGA0LzRiyDQuNC3INC60LvQsNGB0YHQsCBGb3JtVmFsaWRhdG9yXG5jb25zdCBmb3JtVmFsaWRhdGlvblByb2ZpbGUgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUVsZW1lbnRQcm9maWxlKTtcbmNvbnN0IGZvcm1WYWxpZGF0aW9uTmV3Q2FyZCA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtTmV3UGxhY2UpO1xuY29uc3QgZm9ybVZhbGlkYXRpb25BdmF0YXIgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5ncywgZm9ybUF2YXRhckVkaXQpO1xuXG4vL9Ch0L7Qt9C00LDRjiDQvdC+0LLRi9C5INC60LvQsNGB0YEg0LTQu9GPINC40YHQv9C+0LvRjNC30L7QstCw0L3QuNGPIGFwaVxuY29uc3QgYXBpID0gbmV3IEFwaSAoe1xuICBiYXNlVXJsOiAnaHR0cHM6Ly9tZXN0by5ub21vcmVwYXJ0aWVzLmNvL3YxL2NvaG9ydC00MS8nLFxuICBoZWFkZXJzOiB7XG4gICAgYXV0aG9yaXphdGlvbjogbXlUb2tlbixcbiAgICAnQ29udGVudC1UeXBlJzogJ2FwcGxpY2F0aW9uL2pzb24nXG4gIH1cbn0pO1xuXG5Qcm9taXNlLmFsbChbXG4gIGFwaS5nZXRJbmZvKCksXG4gIGFwaS5nZXRDYXJkcygpXG5dKVxuLnRoZW4odmFsdWUgPT4ge1xuICBjb25zdCB1c2VySW5mbyA9IHZhbHVlWzBdO1xuICBjb25zdCBjYXJkcyA9IHZhbHVlWzFdO1xuICBvd25lcklkID0gdXNlckluZm8uX2lkO1xuICBjYXJkcy5mb3JFYWNoKGNhcmQgPT4ge1xuICAgIGNhcmQub3duZXJJZCA9IHVzZXJJbmZvLl9pZDtcbiAgfSk7XG4gIGluaXRpYWxDYXJkc0xpc3QucmVuZGVyZXJDYXJkcyhjYXJkcyk7XG4gIHVzZXIuc2V0VXNlckluZm8odXNlckluZm8pO1xuICB1c2VyLnNldFVzZXJBdmF0YXIodXNlckluZm8pO1xuICBoaWRlUHJlbG9hZGVyKCk7XG59KVxuLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuXG5jb25zdCBzZW5kQXJnVG9DbGFzc0NhcmQgPSAoLi4uYXJnKSA9PiBuZXcgQ2FyZCguLi5hcmcpO1xuXG4vL1BvcHVwIGRlbGV0ZSBjb25maXJtYXRpb25cbmNvbnN0IHN1Ym1pdFBvcHVwID0gbmV3IFBvcHVwV2l0aFN1Ym1pdCgnLnBvcHVwX3R5cGVfZGVsZXRlLWNvbmZpcm0nKTtcbnN1Ym1pdFBvcHVwLnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbi8vUG9wdXAgYXZhdGFyIGVkaXRcbmNvbnN0IHBvcHVwQXZhdGFyRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9hdmF0YXItZWRpdCcsIHNlbmROZXdBdmF0YXJBcGkpXG5wb3B1cEF2YXRhckVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKVxuXG5mdW5jdGlvbiBzZW5kTmV3QXZhdGFyQXBpKGl0ZW0pIHtcbiAgcG9wdXBBdmF0YXJFZGl0LmxvYWRpbmdJblByb2Nlc3MoKTtcbiAgYXBpLmNoYW5nZUF2YXRhcihpdGVtKVxuICAudGhlbihyZXMgPT4ge1xuICAgIHVzZXIuc2V0VXNlckF2YXRhcihyZXMpO1xuICAgIHBvcHVwQXZhdGFyRWRpdC5jbG9zZSgpO1xuXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgLmZpbmFsbHkoKCkgPT4gcG9wdXBBdmF0YXJFZGl0LmxvYWRpbmdEb25lKCfQodC+0YXRgNCw0L3QuNGC0YwnKSlcbn1cblxuLy8qKioqKlBvcHVwIGVkaXQqKioqKlxuLy/QntCx0YrRj9Cy0LvRj9GOINC60LvQsNGB0YEg0LTQu9GPINC40L3RhNC+0YDQvNCw0YbQuNC4INC+INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvQtVxuY29uc3QgdXNlciA9IG5ldyBVc2VySW5mbyAoe1xuICBuYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fdGl0bGUnLFxuICBvY2N1cGF0aW9uU2VsZWN0b3I6ICcucHJvZmlsZV9fc3VidGl0bGUnLFxuICBhdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInXG59KVxuXG4vL1BvcHVwIHByb2ZpbGUgZWRpdFxuY29uc3QgcG9wdXBQcm9maWxlRWRpdCA9IG5ldyBQb3B1cFdpdGhGb3JtKCcucG9wdXBfdHlwZV9wcm9maWxlLWVkaXQnLCBuZXdQcm9maWxlRGF0YUFwaSk7XG5wb3B1cFByb2ZpbGVFZGl0LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmZ1bmN0aW9uIG5ld1Byb2ZpbGVEYXRhQXBpKGl0ZW0pIHtcbiAgcG9wdXBQcm9maWxlRWRpdC5sb2FkaW5nSW5Qcm9jZXNzKCk7XG4gIGFwaS5zZW5kTmV3UHJvZmlsZURhdGEoaXRlbSlcbiAgLnRoZW4ocmVzID0+IHtcbiAgICB1c2VyLnNldFVzZXJJbmZvKHJlcyk7XG4gICAgcG9wdXBQcm9maWxlRWRpdC5jbG9zZSgpO1xuICB9KVxuICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gIC5maW5hbGx5KCgpPT4gcG9wdXBQcm9maWxlRWRpdC5sb2FkaW5nRG9uZSgn0KHQvtGF0YDQsNC90LjRgtGMJykpXG59XG5cbi8vUG9wdXAgbmV3IGNhcmQgYWRkXG5jb25zdCBwb3B1cEFkZE5ld0NhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybSAoJy5wb3B1cF90eXBlX25ldy1jYXJkJywgYWRkTmV3Q2FyZEFwaSk7XG5wb3B1cEFkZE5ld0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gYWRkTmV3Q2FyZEFwaShpdGVtKSB7XG4gIHBvcHVwQWRkTmV3Q2FyZC5sb2FkaW5nSW5Qcm9jZXNzKCk7XG4gIGFwaS5zZW5kTmV3Q2FyZERhdGEoaXRlbSlcbiAgLnRoZW4odmFsdWUgPT4ge1xuICAgIHZhbHVlLm93bmVySWQgPSBvd25lcklkO1xuICAgIGluaXRpYWxDYXJkc0xpc3QuYWRkSXRlbShjcmVhdGVOZXdDYXJkSnVzdCh2YWx1ZSkpO1xuICAgIHBvcHVwQWRkTmV3Q2FyZC5jbG9zZSgpXG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgLmZpbmFsbHkoKCk9PiBwb3B1cEFkZE5ld0NhcmQubG9hZGluZ0RvbmUoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpKVxufVxuXG5mdW5jdGlvbiBkZWxldGVDYXJkQXBpKGl0ZW0sIGNhcmQpIHtcbiAgc3VibWl0UG9wdXAuc2V0U3VibWl0QWN0aW9uKCgpID0+IHtcbiAgICBzdWJtaXRQb3B1cC5sb2FkaW5nSW5Qcm9jZXNzKCk7XG4gICAgc3VibWl0UG9wdXAuZGlzYWJsZVN1Ym1pdEJ0bigpO1xuICAgIGFwaS5kZWxldGVDYXJkKGl0ZW0sIGNhcmQpXG4gICAgLnRoZW4oKCkgPT4ge1xuICAgICAgY2FyZC5yZW1vdmUoKTtcbiAgICAgIGNhcmQgPSBudWxsO1xuICAgICAgc3VibWl0UG9wdXAuY2xvc2UoKTtcbiAgICB9KS5jYXRjaCgoZXJyKSA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAgIC5maW5hbGx5KCgpPT4gc3VibWl0UG9wdXAubG9hZGluZ0RvbmUoJ9CU0LAnKSlcbiAgfSk7XG4gIHN1Ym1pdFBvcHVwLmVuYWJsZVN1Ym1pdEJ0bigpO1xuICBzdWJtaXRQb3B1cC5vcGVuKCk7XG4gIHN1Ym1pdFBvcHVwLnN1Ym1pdCgpO1xufVxuXG5jb25zdCBpbWFnZVByZXZpZXcgPSBuZXcgUG9wdXBXaXRoSW1hZ2UoJy5wb3B1cF90eXBlX3ZpZXctaW1hZ2UnKTtcbmltYWdlUHJldmlldy5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBpbml0aWFsQ2FyZHNMaXN0ID0gbmV3IFNlY3Rpb24oY3JlYXRlTmV3Q2FyZEp1c3QsICcuZWxlbWVudHMnKTtcblxuZnVuY3Rpb24gaGFuZGxlQ2FyZENsaWNrKGNhcmRQaWMpIHtcbiAgaW1hZ2VQcmV2aWV3Lm9wZW4oY2FyZFBpYyk7XG59O1xuXG4vL9Ch0LvRg9GI0LDRgtC10LvQuCDRgdC+INGB0YHRi9C70LrQvtC5INC90LAg0LrQu9Cw0YHRgdGLXG5wcm9maWxlT3BlbkJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgY29uc3QgdXNlckluZm8gPSB1c2VyLmdldFVzZXJJbmZvKCk7XG4gIG5hbWVJbnB1dC52YWx1ZSA9IHVzZXJJbmZvLm5hbWU7XG4gIGpvYklucHV0LnZhbHVlID0gdXNlckluZm8uYWJvdXQ7XG4gIHBvcHVwUHJvZmlsZUVkaXQub3BlbigpO1xuICBmb3JtVmFsaWRhdGlvblByb2ZpbGUucmVzZXRUZXh0RXJyb3IoKTtcbiAgLy9wb3B1cFByb2ZpbGVFZGl0LmxvYWRpbmdEb25lKCfQodC+0YXRgNCw0L3QuNGC0YwnKTtcbn0pO1xuXG5hdmF0YXJFZGl0QnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEF2YXRhckVkaXQub3BlbigpO1xuICBwb3B1cEF2YXRhckVkaXQubG9hZGluZ0RvbmUoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICBmb3JtVmFsaWRhdGlvbkF2YXRhci5yZXNldFRleHRFcnJvcigpO1xufSlcblxuY2FyZEFkZEJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgcG9wdXBBZGROZXdDYXJkLm9wZW4oKTtcbiAgZm9ybVZhbGlkYXRpb25OZXdDYXJkLnJlc2V0VGV4dEVycm9yKCk7XG4gIC8vcG9wdXBBZGROZXdDYXJkLmxvYWRpbmdEb25lKCfQodC+0YXRgNCw0L3QuNGC0YwnKTtcbn0pO1xuXG5mb3JtVmFsaWRhdGlvblByb2ZpbGUuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybVZhbGlkYXRpb25OZXdDYXJkLmVuYWJsZVZhbGlkYXRpb24oKTtcbmZvcm1WYWxpZGF0aW9uQXZhdGFyLmVuYWJsZVZhbGlkYXRpb24oKTtcblxuLy/RhNGD0L3QutGG0LjRjyDRgdC+0LfQtNCw0L3QuNGPINC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuFxuZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZEp1c3QgKGl0ZW0pIHtcbiAgY29uc3QgY2FyZCA9IHNlbmRBcmdUb0NsYXNzQ2FyZChcbiAgICBpdGVtLFxuICAgIGNhcmRUZW1wbGF0ZSxcbiAgICBoYW5kbGVDYXJkQ2xpY2ssXG4gICAgZGVsZXRlQ2FyZEFwaSlcblxuICBjYXJkLnNlbmRMaWtlQXBpKCgpID0+IHtcbiAgICBhcGkuc2VuZExpa2UoaXRlbSlcbiAgICAudGhlbihyZXMgPT4ge1xuICAgICAgY2FyZC5oYW5kbGVyTGlrZShyZXMpO1xuICAgIH0pXG4gICAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICB9KSxcbiAgY2FyZC5kZWxldGVMaWtlQXBpKCgpID0+IHtcbiAgICBhcGkuZGVsZXRlTGlrZShpdGVtKVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBjYXJkLmhhbmRsZXJMaWtlKHJlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gIH0pO1xuXG4gIHJldHVybiBjYXJkLmNyZWF0ZUNhcmQoKTtcbn1cblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XG4gICAgdGhpcy5fdXJsID0gYmFzZVVybDtcbiAgICB0aGlzLl9oZWFkZXJzID0gaGVhZGVycztcbiAgfVxuICAvL9C80LXRgtC+0LQg0LfQsNCz0YDRg9C20LDQtdGCINC00LDQvdC90YvQtSDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8g0YEg0YHQtdGA0LLQtdGA0LAg0Lgg0LLQvtC30LLRgNCw0YnQsNC10YIg0LjRhSDQutCw0Log0L7QsdGK0LXQutGCXG4gIGdldEluZm8oKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH11c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL9C80LXRgtC+0LQg0LfQsNC/0YDQsNGI0LjQstCw0LXRgiDQtNCw0L3QvdGL0LUg0YEg0LrQsNGA0YLQvtGH0LrQsNC80Lgg0YEg0YHQtdGA0LLQtdGA0LBcbiAgZ2V0Q2FyZHMoKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkc2AsIHtcbiAgICAgIG1ldGhvZDogJ0dFVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuICAvL9Cc0LXRgtC+0LQg0L7RgtC/0YDQsNCy0LvRj9C10YIg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdCwINGB0LXRgNCy0LXRgFxuICBzZW5kTmV3UHJvZmlsZURhdGEoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9dXNlcnMvbWVgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgLy/QnNC10YLQvtC0INC+0YLQv9GA0LDQstC70Y/QtdGCINC00LDQvdC90YvQtSDQvdC+0LLQvtC5INC60LDRgNGC0L7Rh9C60Lgg0L3QsCDRgdC10YDQstC10YBcbiAgc2VuZE5ld0NhcmREYXRhKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnUE9TVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2RhdGEuX2lkfWAsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGNoYW5nZUF2YXRhcihkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH11c2Vycy9tZS9hdmF0YXJgLCB7XG4gICAgICBtZXRob2Q6ICdQQVRDSCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoZGF0YSlcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgc2VuZExpa2UoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHMvJHtkYXRhLl9pZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6ICdQVVQnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlTGlrZShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2RhdGEuX2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ0RFTEVURScsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSB7XG4gICAgICByZXR1cm4gcmVzLmpzb24oKTtcbiAgICB9XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFcnJvcjogJHtyZXMuc3RhdHVzfWApXG59XG5cbn1cblxuXG5cblxuIiwiaW1wb3J0IFBvcHVwIGZyb20gJy4vUG9wdXAuanMnO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhTdWJtaXQgZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9zdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJyk7XG4gIH1cblxuICBzZXRTdWJtaXRBY3Rpb24oc3VibWl0QWN0aW9uKSB7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2sgPSBzdWJtaXRBY3Rpb247XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICBzdXBlci5zZXRFdmVudExpc3RlbmVycygpO1xuICB9XG5cbiAgY2xvc2UoKXtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX3N1Ym1pdC5yZW1vdmVFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrKTtcbiAgfVxuXG4gIHN1Ym1pdCgpIHtcbiAgICB0aGlzLl9zdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjayk7XG4gIH1cblxuICBsb2FkaW5nSW5Qcm9jZXNzKCkge1xuICAgIHRoaXMuX3N1Ym1pdC50ZXh0Q29udGVudCA9ICfQo9C00LDQu9C10L3QuNC1Li4uJ1xuICB9XG5cbiAgbG9hZGluZ0RvbmUoKSB7XG4gICAgdGhpcy5fc3VibWl0LnRleHRDb250ZW50ID0gJ9CU0LAnO1xuICB9XG5cbiAgZGlzYWJsZVN1Ym1pdEJ0bigpIHtcbiAgICB0aGlzLl9zdWJtaXQuZGlzYWJsZWQgPSB0cnVlO1xuICB9XG5cbiAgZW5hYmxlU3VibWl0QnRuKCkge1xuICAgIHRoaXMuX3N1Ym1pdC5kaXNhYmxlZCA9IGZhbHNlO1xuICB9XG59XG5cblxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IgKHtuYW1lU2VsZWN0b3IsIG9jY3VwYXRpb25TZWxlY3RvciwgYXZhdGFyU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IobmFtZVNlbGVjdG9yKTtcbiAgICB0aGlzLl9vY2N1cGF0aW9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvY2N1cGF0aW9uU2VsZWN0b3IpO1xuICAgIHRoaXMuX2F2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYXZhdGFyU2VsZWN0b3IpO1xuICB9XG5cbiAgLy/QstC+0LfQstGA0LDRidCw0LXRgiDQvtCx0YrQtdC60YIg0YEg0LTQsNC90L3Ri9C80Lgg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPLiDQrdGC0L7RgiDQvNC10YLQvtC0INC/0YDQuNCz0L7QtNC40YLRgdGPINC60L7Qs9C00LAg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQvdGD0LbQvdC+INCx0YPQtNC10YIg0L/QvtC00YHRgtCw0LLQuNGC0Ywg0LIg0YTQvtGA0LzRgyDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuC5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUudGV4dENvbnRlbnQsXG4gICAgICBhYm91dDogdGhpcy5fb2NjdXBhdGlvbi50ZXh0Q29udGVudFxuICAgIH1cbiAgfVxuXG4gIC8v0L/RgNC40L3QuNC80LDQtdGCINC90L7QstGL0LUg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LjRhSDQvdCwINGB0YLRgNCw0L3QuNGG0YMuXG4gIHNldFVzZXJJbmZvKHVzZXJJbmZvKSB7XG4gICAgdGhpcy5fbmFtZS50ZXh0Q29udGVudCA9IHVzZXJJbmZvLm5hbWU7XG4gICAgdGhpcy5fb2NjdXBhdGlvbi50ZXh0Q29udGVudCA9IHVzZXJJbmZvLmFib3V0O1xuICB9XG5cbiAgc2V0VXNlckF2YXRhcih1c2VySW5mbykge1xuICAgIHRoaXMuX2F2YXRhci5zcmMgPSB1c2VySW5mby5hdmF0YXJcbiAgfVxufVxuXG5cblxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEltYWdlIGV4dGVuZHMgUG9wdXAge1xuXG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbWFnZSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nJyk7XG4gICAgdGhpcy5fY2FwdGlvbiA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW1nLXRpdGxlJyk7XG5cbiAgfVxuICAvL9Cd0LDRgdC70LXQtNGD0LXRgiDQvNC10YLQvtC0INC+0YIg0YDQvtC00LjRgtC10LvRjyDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0L/QvtC00YHRgtCw0L3QvtCy0LrRgyDRgdGB0YvQu9C60Lgg0LrQsNGA0YLQuNC90LrQuCDQuCDQuNC80Y8g0LrQsNGA0YLQuNC90LrQuFxuICBvcGVuKGNhcmRQaWMpIHtcbiAgICBzdXBlci5vcGVuKCk7XG4gICAgdGhpcy5fY2FwdGlvbi50ZXh0Q29udGVudCA9IGNhcmRQaWMubmFtZTtcbiAgICB0aGlzLl9pbWFnZS5zcmMgPSBjYXJkUGljLmxpbms7XG4gICAgdGhpcy5faW1hZ2UuYWx0ID0gY2FyZFBpYy5uYW1lO1xuICB9XG59XG5cblxuXG5cblxuXG5cbiIsIi8v0L7RgtCy0LXRh9Cw0LXRgiDQt9CwINC+0YLRgNC40YHQvtCy0LrRgyDRjdC70LXQvNC10L3RgtC+0LIg0L3QsCDRgdGC0YDQsNC90LjRhtC1XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFNlY3Rpb24ge1xuICBjb25zdHJ1Y3RvcihyZW5kZXJlciwgY29udGFpbmVyU2VsZWN0b3Ipe1xuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7IC8v0Y3RgtC+INGE0YPQvdC60YbQuNGPLCDQutC+0YLQvtGA0LDRjyDQvtGC0LLQtdGH0LDQtdGCINC30LAg0YHQvtC30LTQsNC90LjQtSDQuCDQvtGC0YDQuNGB0L7QstC60YMg0LTQsNC90L3Ri9GFINC90LAg0YHRgtGA0LDQvdC40YbQtVxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpOyAvL9GB0LXQu9C10LrRgtC+0YAg0LrQvtC90YLQtdC50L3QtdGA0LAsINCyINC60L7RgtC+0YDRi9C5INC90YPQttC90L4g0LTQvtCx0LDQstC70Y/RgtGMINGB0L7Qt9C00LDQvdC90YvQtSDRjdC70LXQvNC10L3RgtGLLlxuICB9XG5cbiAgLy/QvtGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtGA0LjRgdC+0LLQutGDINCy0YHQtdGFINGN0LvQtdC80LXQvdGC0L7Qsi5cbiAgcmVuZGVyZXJDYXJkcyhjYXJkcykge1xuICAgIGNhcmRzLnJldmVyc2UoKS5mb3JFYWNoKGNhcmQgPT4ge1xuICAgICAgdGhpcy5hZGRJdGVtKHRoaXMuX3JlbmRlcmVyKGNhcmQpKTtcbiAgICAgIHJldHVybiBjYXJkXG4gICAgfSlcbiAgfVxuXG4gIC8v0L/RgNC40L3QuNC80LDQtdGCIERPTS3RjdC70LXQvNC10L3RgiDQuCDQtNC+0LHQsNCy0LvRj9C10YIg0LXQs9C+INCyINC60L7QvdGC0LXQudC90LXRgFxuICBhZGRJdGVtKGNhcmQpIHtcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChjYXJkKTtcbiAgfVxuXG59XG5cbiJdLCJuYW1lcyI6WyJDYXJkIiwiY29uc3RydWN0b3IiLCJpbmZvQ2FyZCIsInRlbXBsYXRlQ2FyZCIsImhhbmRsZUNhcmRDbGljayIsIm9wZW5GIiwic2VuZExpa2VBcGkiLCJkZWxldGVMaWtlQXBpIiwidGhpcyIsIl9pbmZvQ2FyZCIsIl9uYW1lIiwibmFtZSIsIl9saW5rIiwibGluayIsIl90ZW1wbGF0ZUNhcmQiLCJfcGljIiwiX2hhbmRsZUNhcmRDbGljayIsIl9vcGVuRiIsIl9saWtlcyIsImxpa2VzIiwiX293bmVySWQiLCJvd25lcklkIiwiX3VzZXJMaWtlZCIsInNvbWUiLCJsaWtlIiwiX2lkIiwiX2NhcmRJZCIsIl9zZW5kTGlrZUFwaSIsIl9kZWxldGVMaWtlQXBpIiwiY3JlYXRlQ2FyZCIsIl9jYXJkIiwiY29udGVudCIsImZpcnN0RWxlbWVudENoaWxkIiwiY2xvbmVOb2RlIiwicXVlcnlTZWxlY3RvciIsInNyYyIsInRleHRDb250ZW50IiwiYWx0IiwiX2xpa2VCdG4iLCJfbGlrZU51bSIsImxlbmd0aCIsIl9pc1VzZXJPd25lciIsInJlbW92ZSIsImNsYXNzTGlzdCIsImFkZCIsIl9hZGRMaXN0ZW5lcnMiLCJfaXNDYXJkTGlrZWQiLCJvd25lciIsImFkZEV2ZW50TGlzdGVuZXIiLCJoYW5kbGVyTGlrZSIsInJlcyIsInRvZ2dsZSIsInJlbW92ZUNhcmQiLCJzZW5kTGlrZSIsImRlbGV0ZUxpa2UiLCJGb3JtVmFsaWRhdG9yIiwic2V0dGluZ3MiLCJmb3JtIiwiX2Zvcm1TZWxlY3RvciIsImZvcm1TZWxlY3RvciIsIl9pbnB1dFNlbGVjdG9yIiwiaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiX2luYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JDbGFzcyIsImlucHV0RXJyb3JDbGFzcyIsIl9lcnJvckNsYXNzIiwiZXJyb3JDbGFzcyIsIl9wb3B1cEZvcm0iLCJfaW5wdXRMaXN0IiwiQXJyYXkiLCJmcm9tIiwicXVlcnlTZWxlY3RvckFsbCIsIl9zYXZlQnRuIiwiX2lzVmFsaWQiLCJpbnB1dCIsInZhbGlkaXR5IiwidmFsaWQiLCJfaGlkZUlucHV0RXJyb3IiLCJfc2hvd0lucHV0RXJyb3IiLCJmb3JtRXJyb3IiLCJpZCIsInZhbGlkYXRpb25NZXNzYWdlIiwiX3NldEV2ZW50TGlzdGVuZXJzIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZm9yRWFjaCIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsIl9lbmFibGVCdXR0b24iLCJfaGFzSW5wdXRzVmFsaWQiLCJyZXNldFRleHRFcnJvciIsIml0ZW0iLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJkb2N1bWVudCIsIl9jbG9zZUJ0biIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5IiwiX2Nsb3NlUHJlc3NPdmVybGF5IiwiY3VycmVudFRhcmdldCIsInRhcmdldCIsInNldEV2ZW50TGlzdGVuZXJzIiwiUG9wdXBXaXRoRm9ybSIsImFwaUNhbGxCYWNrIiwic3VwZXIiLCJfaW5wdXRzTGlzdCIsIl9mb3JtIiwiX2FwaUNhbGxCYWNrIiwiX3N1Ym1pdEJ0biIsIl9nZXRJbnB1dFZhbHVlcyIsIl9kYXRhIiwidmFsdWUiLCJzdWJtaXRIYW5kbGVyIiwicmVzZXQiLCJpbmZvIiwibG9hZGluZ0luUHJvY2VzcyIsImxvYWRpbmdEb25lIiwidGV4dCIsImZvcm1FbGVtZW50UHJvZmlsZSIsImZvcm1OZXdQbGFjZSIsImZvcm1BdmF0YXJFZGl0IiwiY2FyZFRlbXBsYXRlIiwicHJvZmlsZU9wZW5CdG4iLCJjYXJkQWRkQnRuIiwiYXZhdGFyRWRpdEJ0biIsIm5hbWVJbnB1dCIsImpvYklucHV0IiwiZm9ybVZhbGlkYXRpb25Qcm9maWxlIiwiZm9ybVZhbGlkYXRpb25OZXdDYXJkIiwiZm9ybVZhbGlkYXRpb25BdmF0YXIiLCJhcGkiLCJiYXNlVXJsIiwiaGVhZGVycyIsIl91cmwiLCJfaGVhZGVycyIsImdldEluZm8iLCJmZXRjaCIsIm1ldGhvZCIsInRoZW4iLCJfY2hlY2tSZXNwb25zZSIsImdldENhcmRzIiwic2VuZE5ld1Byb2ZpbGVEYXRhIiwiZGF0YSIsImJvZHkiLCJKU09OIiwic3RyaW5naWZ5Iiwic2VuZE5ld0NhcmREYXRhIiwiZGVsZXRlQ2FyZCIsImNoYW5nZUF2YXRhciIsIm9rIiwianNvbiIsIlByb21pc2UiLCJyZWplY3QiLCJzdGF0dXMiLCJhdXRob3JpemF0aW9uIiwiYWxsIiwidXNlckluZm8iLCJjYXJkcyIsImNhcmQiLCJpbml0aWFsQ2FyZHNMaXN0IiwicmVuZGVyZXJDYXJkcyIsInVzZXIiLCJzZXRVc2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJwcmVsb2FkZXIiLCJzZXRUaW1lb3V0IiwiaGlkZVByZWxvYWRlciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdFBvcHVwIiwiX3N1Ym1pdCIsInNldFN1Ym1pdEFjdGlvbiIsInN1Ym1pdEFjdGlvbiIsIl9oYW5kbGVTdWJtaXRDYWxsYmFjayIsInN1Ym1pdCIsImRpc2FibGVTdWJtaXRCdG4iLCJlbmFibGVTdWJtaXRCdG4iLCJwb3B1cEF2YXRhckVkaXQiLCJmaW5hbGx5IiwibmFtZVNlbGVjdG9yIiwib2NjdXBhdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfb2NjdXBhdGlvbiIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwicG9wdXBQcm9maWxlRWRpdCIsInBvcHVwQWRkTmV3Q2FyZCIsImFkZEl0ZW0iLCJjcmVhdGVOZXdDYXJkSnVzdCIsImRlbGV0ZUNhcmRBcGkiLCJpbWFnZVByZXZpZXciLCJfaW1hZ2UiLCJfY2FwdGlvbiIsImNhcmRQaWMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJldmVyc2UiLCJwcmVwZW5kIiwiYXJnIiwic2VuZEFyZ1RvQ2xhc3NDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==