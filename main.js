(()=>{"use strict";class e{constructor(e,t,s,i,r,n){this._infoCard=e,this._name=e.name,this._link=e.link,this._templateCard=t,this._pic=e,this._handleCardClick=s,this._openF=i,this._likes=e.likes,this._ownerId=this._infoCard.ownerId,this._userLiked=this._likes.some((e=>e._id===this._ownerId)),this._cardId=e._id,this._sendLikeApi=r,this._deleteLikeApi=n}createCard(){return this._card=this._templateCard.content.firstElementChild.cloneNode(!0),this._card.querySelector(".element__pic").src=this._link,this._card.querySelector(".element__title-text").textContent=this._name,this._card.querySelector(".element__pic").alt=this._name,this._likeBtn=this._card.querySelector(".element__title-like"),this._likeNum=this._card.querySelector(".element__title-like-num"),this._likeNum.textContent=this._likes.length,this._isUserOwner()||this._card.querySelector(".element__bin").remove(),this._userLiked&&this._likeBtn.classList.add("element__title-like_active"),this._addListeners(),this._card}_isCardLiked(){this._userLiked=this._likes.some((e=>e._id===this._ownerId))}_isUserOwner(){if(this._infoCard.owner._id===this._ownerId)return!0}_addListeners(){this._likeBtn.addEventListener("click",(()=>{this._userLiked?this._deleteLikeApi(this._infoCard):this._sendLikeApi(this._infoCard)})),this._isUserOwner()&&this._card.querySelector(".element__bin").addEventListener("click",(()=>this._openF(this._infoCard,this._card))),this._card.querySelector(".element__pic").addEventListener("click",(()=>{this._handleCardClick(this._pic)}))}handlerLike(e){this._likeBtn.classList.toggle("element__title-like_active"),this._likeNum.textContent=e.likes.length,this._userLiked=!this._userLiked}removeCard(){this._card.remove(),this._card=null}sendLikeApi(e){this._sendLikeApi=e}deleteLikeApi(e){this._deleteLikeApi=e}}class t{constructor(e,t){this._formSelector=e.formSelector,this._inputSelector=e.inputSelector,this._submitButtonSelector=e.submitButtonSelector,this._inactiveButtonClass=e.inactiveButtonClass,this._inputErrorClass=e.inputErrorClass,this._errorClass=e.errorClass,this._popupForm=t,this._inputList=Array.from(this._popupForm.querySelectorAll(this._inputSelector)),this._saveBtn=this._popupForm.querySelector(this._submitButtonSelector)}_isValid(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}_showInputError(e){const t=this._popupForm.querySelector(`.${e.id}-error`);t.textContent=e.validationMessage,t.classList.add(this._errorClass),e.classList.add(this._inputErrorClass)}_hideInputError(e){const t=this._popupForm.querySelector(`.${e.id}-error`);t.classList.remove(this._errorClass),t.textContent="",e.classList.remove(this._inputErrorClass)}_setEventListeners(){this._toggleButtonState(),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._isValid(e),this._toggleButtonState()}))}))}enableValidation(){this._popupForm.addEventListener("submit",(e=>{e.preventDefault()})),this._setEventListeners()}disableButton(){this._saveBtn.classList.add(this._inactiveButtonClass),this._saveBtn.disabled=!0}_enableButton(){this._saveBtn.classList.remove(this._inactiveButtonClass),this._saveBtn.disabled=!1}_toggleButtonState(){this._hasInputsValid()?this.disableButton():this._enableButton()}_hasInputsValid(){return this._inputList.some((e=>!e.validity.valid))}resetTextError(){this._inputList.forEach((e=>{this._hideInputError(e)}))}}class s{constructor(e){this._popup=document.querySelector(e),this._closeBtn=this._popup.querySelector(".popup__close-button"),this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(e){"Escape"===e.key&&this.close()}_closePressOverlay(e){e.currentTarget===e.target&&this.close()}setEventListeners(){this._closeBtn.addEventListener("click",(()=>this.close())),this._popup.addEventListener("mousedown",(e=>this._closePressOverlay(e)))}}class i extends s{constructor(e,t){super(e),this._inputsList=this._popup.querySelectorAll(".popup__input"),this._form=this._popup.querySelector(".popup__form"),this._apiCallBack=t,this._submitBtn=this._popup.querySelector(".popup__save-button")}_getInputValues(){return this._data={},this._inputsList.forEach((e=>{this._data[e.name]=e.value})),this._data}setEventListeners(){super.setEventListeners(),this._form.addEventListener("submit",this.submitHandler)}close(){super.close(),this._form.reset()}submitHandler=()=>{const e=this._getInputValues();this._apiCallBack(e)};loadingInProcess(){this._submitBtn.textContent="Сохранение..."}loadingDone(e){this._submitBtn.textContent=e}}const r=document.querySelector(".popup__form-profile"),n=document.querySelector(".popup__form-place"),o=document.querySelector(".popup__form-avatar"),a=document.querySelector("#element-template"),l={formSelector:".popup__form",inputSelector:".popup__input",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button_inactive",inputErrorClass:"popup__form_type_error",errorClass:"popup__error-text_status_active"},c=document.querySelector(".profile__edit-button"),_=document.querySelector(".profile__add-button"),h=document.querySelector(".profile__avatar-edit"),d=document.querySelector(".popup__input_field_name"),u=document.querySelector(".popup__input_field_occupation");let p;const m=new t(l,r),v=new t(l,n),k=new t(l,o),L=new class{constructor({baseUrl:e,headers:t}){this._url=e,this._headers=t}getInfo(){return fetch(`${this._url}users/me`,{method:"GET",headers:this._headers}).then(this._checkResponse)}getCards(){return fetch(`${this._url}cards`,{method:"GET",headers:this._headers}).then(this._checkResponse)}sendNewProfileData(e){return fetch(`${this._url}users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}sendNewCardData(e){return fetch(`${this._url}cards`,{method:"POST",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._url}cards/${e._id}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}changeAvatar(e){return fetch(`${this._url}users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify(e)}).then(this._checkResponse)}sendLike(e){return fetch(`${this._url}cards/${e._id}/likes`,{method:"PUT",headers:this._headers}).then(this._checkResponse)}deleteLike(e){return fetch(`${this._url}cards/${e._id}/likes`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}_checkResponse(e){return e.ok?e.json():Promise.reject(`Error: ${e.status}`)}}({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41/",headers:{authorization:"6f7d4ee2-1133-493f-8dc5-cde7a586dd12","Content-Type":"application/json"}});Promise.all([L.getInfo(),L.getCards()]).then((e=>{const t=e[0],s=e[1];p=t._id,s.forEach((e=>{e.ownerId=t._id})),B.rendererCards(s),C.setUserInfo(t),C.setUserAvatar(t)})).catch((e=>console.log(e)));const f=new class extends s{constructor(e){super(e),this._submit=this._popup.querySelector(".popup__save-button")}setSubmitAction(e){this._handleSubmitCallback=e}setEventListeners(){super.setEventListeners()}close(){super.close(),this._submit.removeEventListener("click",this._handleSubmitCallback)}submit(){this._submit.addEventListener("click",this._handleSubmitCallback)}loadingInProcess(){this._submit.textContent="Удаление..."}loadingDone(){this._submit.textContent="Да"}disableSubmitBtn(){this._submit.disabled=!0}enableSubmitBtn(){this._submit.disabled=!1}}(".popup_type_delete-confirm");f.setEventListeners();const b=new i(".popup_type_avatar-edit",(function(e){b.loadingInProcess(),L.changeAvatar(e).then((e=>{C.setUserAvatar(e),b.close()})).catch((e=>console.log(e))).finally((()=>b.loadingDone("Сохранить")))}));b.setEventListeners();const C=new class{constructor({nameSelector:e,occupationSelector:t,avatarSelector:s}){this._name=document.querySelector(e),this._occupation=document.querySelector(t),this._avatar=document.querySelector(s)}getUserInfo(){return{name:this._name.textContent,about:this._occupation.textContent}}setUserInfo(e){this._name.textContent=e.name,this._occupation.textContent=e.about}setUserAvatar(e){this._avatar.src=e.avatar}}({nameSelector:".profile__title",occupationSelector:".profile__subtitle",avatarSelector:".profile__avatar"}),S=new i(".popup_type_profile-edit",(function(e){S.loadingInProcess(),L.sendNewProfileData(e).then((e=>{C.setUserInfo(e),S.close()})).catch((e=>console.log(e))).finally((()=>S.loadingDone("Сохранить")))}));S.setEventListeners();const E=new i(".popup_type_new-card",(function(e){E.loadingInProcess(),L.sendNewCardData(e).then((e=>{e.ownerId=p,B.addItem(q(e)),E.close()})).catch((e=>console.log(e))).finally((()=>E.loadingDone("Сохранить")))}));function y(e,t){f.setSubmitAction((()=>{f.loadingInProcess(),f.disableSubmitBtn(),L.deleteCard(e,t).then((()=>{t.remove(),t=null,f.close()})).catch((e=>console.log(e))).finally((()=>f.loadingDone("Да")))})),f.enableSubmitBtn(),f.open(),f.submit()}E.setEventListeners();const g=new class extends s{constructor(e){super(e),this._image=this._popup.querySelector(".popup__img"),this._caption=this._popup.querySelector(".popup__img-title")}open(e){super.open(),this._caption.textContent=e.name,this._image.src=e.link,this._image.alt=e.name}}(".popup_type_view-image");g.setEventListeners();const B=new class{constructor(e,t){this._renderer=e,this._container=document.querySelector(t)}rendererCards(e){e.reverse().forEach((e=>(this.addItem(this._renderer(e)),e)))}addItem(e){this._container.prepend(e)}}(q,".elements");function w(e){g.open(e)}function q(t){const s=((...t)=>new e(...t))(t,a,w,y);return s.sendLikeApi((()=>{L.sendLike(t).then((e=>{s.handlerLike(e)})).catch((e=>console.log(e)))})),s.deleteLikeApi((()=>{L.deleteLike(t).then((e=>{s.handlerLike(e)})).catch((e=>console.log(e)))})),s.createCard()}c.addEventListener("click",(()=>{const e=C.getUserInfo();d.value=e.name,u.value=e.about,S.open(),m.resetTextError()})),h.addEventListener("click",(()=>{b.open(),b.loadingDone("Сохранить"),k.resetTextError()})),_.addEventListener("click",(()=>{E.open(),v.resetTextError()})),m.enableValidation(),v.enableValidation(),k.enableValidation()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFLb0csR0E4QnBCLFNBQVNMLEVBQW1CdkcsR0FDMUIsTUFBTXdFLEVBbkhtQixLQUFJMkMsSUFBUSxJQUFJbk4sS0FBUW1OLEdBbUhwQ0MsQ0FDWHBILEVBQ0FtQyxFQUNBL0gsRUFDQW9NLEdBaUJGLE9BZkFoQyxFQUFLbEssYUFBWSxLQUNmc0ksRUFBSXZGLFNBQVMyQyxHQUNab0QsTUFBS2xHLElBQ0pzSCxFQUFLdkgsWUFBWUMsTUFFbEI0SCxPQUFNQyxHQUFPQyxRQUFRQyxJQUFJRixRQUU1QlAsRUFBS2pLLGVBQWMsS0FDakJxSSxFQUFJdEYsV0FBVzBDLEdBQ2RvRCxNQUFLbEcsSUFDSnNILEVBQUt2SCxZQUFZQyxNQUVsQjRILE9BQU1DLEdBQU9DLFFBQVFDLElBQUlGLFFBR3JCUCxFQUFLM0ksYUFoRGR1RyxFQUFlcEYsaUJBQWlCLFNBQVMsS0FDdkMsTUFBTXNILEVBQVdLLEVBQUtzQixjQUN0QjFELEVBQVVkLE1BQVE2QyxFQUFTM0osS0FDM0I2SCxFQUFTZixNQUFRNkMsRUFBUzRCLE1BQzFCRSxFQUFpQjVGLE9BQ2pCaUMsRUFBc0IxQyxvQkFJeEJ1QyxFQUFjdEYsaUJBQWlCLFNBQVMsS0FDdEMwSSxFQUFnQmxGLE9BQ2hCa0YsRUFBZ0I1RCxZQUFZLGFBQzVCYSxFQUFxQjVDLG9CQUd2QnNDLEVBQVdyRixpQkFBaUIsU0FBUyxLQUNuQ3FKLEVBQWdCN0YsT0FDaEJrQyxFQUFzQjNDLG9CQUl4QjBDLEVBQXNCakQsbUJBQ3RCa0QsRUFBc0JsRCxtQkFDdEJtRCxFQUFxQm5ELG9CIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy91dGlscy9jb25zdGFudHMuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Vc2VySW5mby5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvU2VjdGlvbi5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcblxuICBjb25zdHJ1Y3RvcihpbmZvQ2FyZCwgdGVtcGxhdGVDYXJkLCBoYW5kbGVDYXJkQ2xpY2ssIG9wZW5GLCBzZW5kTGlrZUFwaSwgZGVsZXRlTGlrZUFwaSkge1xuICAgIHRoaXMuX2luZm9DYXJkID0gaW5mb0NhcmRcbiAgICB0aGlzLl9uYW1lID0gaW5mb0NhcmQubmFtZTtcbiAgICB0aGlzLl9saW5rID0gaW5mb0NhcmQubGluaztcbiAgICB0aGlzLl90ZW1wbGF0ZUNhcmQgPSB0ZW1wbGF0ZUNhcmQ7XG4gICAgdGhpcy5fcGljID0gaW5mb0NhcmQ7XG4gICAgdGhpcy5faGFuZGxlQ2FyZENsaWNrID0gaGFuZGxlQ2FyZENsaWNrO1xuICAgIHRoaXMuX29wZW5GID0gb3BlbkY7XG4gICAgdGhpcy5fbGlrZXMgPSBpbmZvQ2FyZC5saWtlcztcbiAgICB0aGlzLl9vd25lcklkID0gdGhpcy5faW5mb0NhcmQub3duZXJJZC8vJ2FlODVjNGVmOTk3ZjAxZjMzZjExM2FmNycgLy/QnNC+0LkgdXNlcklEXG4gICAgdGhpcy5fdXNlckxpa2VkID0gdGhpcy5fbGlrZXMuc29tZShsaWtlID0+IGxpa2UuX2lkID09PSB0aGlzLl9vd25lcklkKS8vINCR0YPQtNC10YIgdHJ1ZSDQtdGB0LvQuCDQtdGB0YLRjCDQvNC+0Lkg0LvQsNC50LpcbiAgICB0aGlzLl9jYXJkSWQgPSBpbmZvQ2FyZC5faWQvL0lEINC60LDRgNGC0L7Rh9C60LhcbiAgICB0aGlzLl9zZW5kTGlrZUFwaSA9IHNlbmRMaWtlQXBpO1xuICAgIHRoaXMuX2RlbGV0ZUxpa2VBcGkgPSBkZWxldGVMaWtlQXBpXG4gIH1cblxuICBjcmVhdGVDYXJkKCkge1xuICAgIHRoaXMuX2NhcmQgPSB0aGlzLl90ZW1wbGF0ZUNhcmQuY29udGVudC5maXJzdEVsZW1lbnRDaGlsZC5jbG9uZU5vZGUodHJ1ZSk7XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcGljJykuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X190aXRsZS10ZXh0JykudGV4dENvbnRlbnQgPSB0aGlzLl9uYW1lO1xuICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3BpYycpLmFsdCA9IHRoaXMuX25hbWU7XG4gICAgdGhpcy5fbGlrZUJ0biA9IHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX3RpdGxlLWxpa2UnKTtcbiAgICB0aGlzLl9saWtlTnVtID0gdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fdGl0bGUtbGlrZS1udW0nKTtcbiAgICB0aGlzLl9saWtlTnVtLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuXG4gICAgLy/Qo9C00LDQu9GP0LXRgiDQstC10LTQtdGA0LrQviDQtdGB0LvQuCDQutCw0YDRgtC+0YfQutCwINC90LUg0LzQvtGPXG4gICAgaWYgKCF0aGlzLl9pc1VzZXJPd25lcigpKSB7XG4gICAgICB0aGlzLl9jYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50X19iaW4nKS5yZW1vdmUoKTtcbiAgICB9O1xuXG4gICAgLy/Ql9Cw0LrRgNCw0YjQuNCy0LDQtdGCINGB0LXRgNC00LXRh9C60L4g0LXRgdC70Lgg0LvQsNC50Log0LzQvtC5XG4gICAgaWYgKHRoaXMuX3VzZXJMaWtlZCkge1xuICAgICAgdGhpcy5fbGlrZUJ0bi5jbGFzc0xpc3QuYWRkKCdlbGVtZW50X190aXRsZS1saWtlX2FjdGl2ZScpO1xuICAgIH07XG5cbiAgICB0aGlzLl9hZGRMaXN0ZW5lcnMoKTtcbiAgICByZXR1cm4gdGhpcy5fY2FyZDtcbiAgfVxuXG4gIC8v0JLQtdGA0L3QtdGCIHRydWUg0LXRgdC70Lgg0YHRgNC10LTQuCDQu9Cw0LnQutC+0LIg0LXRgdGC0Ywg0LzQvtC5INC70LDQudC6XG4gIF9pc0NhcmRMaWtlZCgpIHtcbiAgIHRoaXMuX3VzZXJMaWtlZCA9IHRoaXMuX2xpa2VzLnNvbWUobGlrZSA9PiB7XG4gICAgIHJldHVybiBsaWtlLl9pZCA9PT0gdGhpcy5fb3duZXJJZDtcbiAgIH0pXG4gIH1cblxuICBfaXNVc2VyT3duZXIoKSB7XG4gICAgaWYgKHRoaXMuX2luZm9DYXJkLm93bmVyLl9pZCA9PT0gdGhpcy5fb3duZXJJZCkge1xuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICB9XG5cbiAgLy/QlNC+0LHQsNCy0LvQtdC90LjQtSDRgdC70YPRiNCw0YLQtdC70LXQuSDQuiDQutCw0YDRgtC+0YfQutC1XG4gIF9hZGRMaXN0ZW5lcnMoKSB7XG5cbiAgICB0aGlzLl9saWtlQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICAgICAgaWYgKCF0aGlzLl91c2VyTGlrZWQpIHtcbiAgICAgICAgdGhpcy5fc2VuZExpa2VBcGkodGhpcy5faW5mb0NhcmQpXG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLl9kZWxldGVMaWtlQXBpKHRoaXMuX2luZm9DYXJkKVxuICAgICAgfVxuICAgIH0pO1xuXG4gICAgaWYgKHRoaXMuX2lzVXNlck93bmVyKCkpIHtcbiAgICAgIHRoaXMuX2NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRfX2JpbicpLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5fb3BlbkYodGhpcy5faW5mb0NhcmQsIHRoaXMuX2NhcmQpKTtcbiAgICB9XG4gICAgdGhpcy5fY2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudF9fcGljJykuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fcGljKVxuICAgIH0pXG4gIH1cblxuICBoYW5kbGVyTGlrZShyZXMpIHtcbiAgICB0aGlzLl9saWtlQnRuLmNsYXNzTGlzdC50b2dnbGUoJ2VsZW1lbnRfX3RpdGxlLWxpa2VfYWN0aXZlJyk7XG4gICAgdGhpcy5fbGlrZU51bS50ZXh0Q29udGVudCA9IHJlcy5saWtlcy5sZW5ndGhcbiAgICB0aGlzLl91c2VyTGlrZWQgPSAhdGhpcy5fdXNlckxpa2VkO1xuICB9XG5cbiAgcmVtb3ZlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkLnJlbW92ZSgpO1xuICAgIHRoaXMuX2NhcmQgPSBudWxsO1xuICB9XG5cbiAgc2VuZExpa2VBcGkoc2VuZExpa2UpIHtcbiAgICB0aGlzLl9zZW5kTGlrZUFwaSA9IHNlbmRMaWtlO1xuICB9XG5cbiAgZGVsZXRlTGlrZUFwaShkZWxldGVMaWtlKSB7XG4gICAgdGhpcy5fZGVsZXRlTGlrZUFwaSA9IGRlbGV0ZUxpa2U7XG4gIH1cblxufVxuXG5cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3J7XG4gIGNvbnN0cnVjdG9yKHNldHRpbmdzLCBmb3JtKSB7XG4gICAgdGhpcy5fZm9ybVNlbGVjdG9yID0gc2V0dGluZ3MuZm9ybVNlbGVjdG9yOyAvL9Ch0LDQvNCwINGE0L7RgNC80LBcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gc2V0dGluZ3MuaW5wdXRTZWxlY3RvcjsgLy/Qn9C+0LvQtSDQstCy0L7QtNCwINC00LDQvdC90YvRhVxuICAgIHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yID0gc2V0dGluZ3Muc3VibWl0QnV0dG9uU2VsZWN0b3I7IC8v0JrQvdC+0L/QutCwINGB0L7RhdGA0LDQvdC10L3QuNGPINGE0L7RgNC80YtcbiAgICB0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzID0gc2V0dGluZ3MuaW5hY3RpdmVCdXR0b25DbGFzczsgLy/QmtC70LDRgdGBINC90LXQsNC60YLQuNCy0L3QvtC5INC60L3QvtC/0LrQuFxuICAgIHRoaXMuX2lucHV0RXJyb3JDbGFzcyA9IHNldHRpbmdzLmlucHV0RXJyb3JDbGFzczsgLy/QmtC70LDRgdGBINC00LXQu9Cw0LXRgiDQv9C+0LTRh9C10YDQutC40LLQsNC90LjQtSDQutGA0LDRgdC90YvQvCDQvtGI0LjQsdC60Lgg0LIg0L/QvtC10Lsg0LLQstC+0LTQsFxuICAgIHRoaXMuX2Vycm9yQ2xhc3MgPSBzZXR0aW5ncy5lcnJvckNsYXNzOyAvL9Ca0LvQsNGB0YEg0LTQtdC70LDQtdGCINGC0LXQutGB0YIg0L7RiNC40LHQutC4INCy0LjQtNC40LzRi9C8XG4gICAgdGhpcy5fcG9wdXBGb3JtID0gZm9ybTsgLy/QpNC+0YDQvNCwLCDQvtGC0LrRg9C00LAg0Y8g0LzQvtCz0YMg0LLQt9GP0YLRjCDQstGB0LUg0Y3Qu9C10LzQtdC90YLRiyDRhNC+0YDQvNGLXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbSh0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKSk7IC8vINCh0L/QuNGB0L7QuiDQstGB0LXRhSDQv9C+0LvQtdC5INCy0LLQvtC00LAg0LTQsNC90L3Ri9GFXG4gICAgdGhpcy5fc2F2ZUJ0biA9IHRoaXMuX3BvcHVwRm9ybS5xdWVyeVNlbGVjdG9yKHRoaXMuX3N1Ym1pdEJ1dHRvblNlbGVjdG9yKTsgLy/QmtC90L7Qv9C60LAg0YHQvtGF0YDQsNC90LjRgtGMXG4gIH1cbiAgLy/Qn9GA0L7QstC10YDQutCwINCy0LDQu9C40LTQvdC+0YHRgtC4INC40L3Qv9GD0YLQsFxuICBfaXNWYWxpZChpbnB1dCkge1xuICAgIGlmICghaW5wdXQudmFsaWRpdHkudmFsaWQpIHtcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXQpO1xuICAgIH1cbiAgfVxuICAvL9Cf0L7QutCw0LfQsNGC0Ywg0L7RiNC40LHQutGDINC40L3Qv9GD0YLQsFxuICBfc2hvd0lucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7IC8v0J3QsNGI0LvQuCDQsdC70L7QuiDQvtGI0LjQsdC60Lggc3BhblxuICAgIGZvcm1FcnJvci50ZXh0Q29udGVudCA9IGlucHV0LnZhbGlkYXRpb25NZXNzYWdlOyAvL9CS0YHRgtCw0LLQuNC70Lgg0YLQtdC60YHRgiDQvtGI0LjQsdC60Lgg0LIg0LHQu9C+0Log0L7RiNC40LHQutC4IHNwYW5cbiAgICBmb3JtRXJyb3IuY2xhc3NMaXN0LmFkZCh0aGlzLl9lcnJvckNsYXNzKTsgLy/QlNC+0LHQsNCy0LjQu9C4INC60LvQsNGB0YEg0LLQuNC00LjQvNC+0YHRgtC4INCx0LvQvtC60YMg0L7RiNC40LHQutC4IHNwYW5cbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7IC8v0J/QvtC00YfQtdGA0LrQvdGD0LvQuCDQutGA0LDRgdC90YvQvCDQv9C+0LvQtSDQuNC90L/Rg9GC0LBcbiAgfTtcbiAgLy/QodC60YDRi9GC0Ywg0L7RiNC40LHQutGDINC40L3Qv9GD0YLQsFxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXQpIHtcbiAgICBjb25zdCBmb3JtRXJyb3IgPSB0aGlzLl9wb3B1cEZvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXQuaWR9LWVycm9yYCk7IC8v0J3QsNGI0LvQuCDQsdC70L7QuiDQvtGI0LjQsdC60Lggc3BhblxuICAgIGZvcm1FcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2Vycm9yQ2xhc3MpOyAvL9Cj0LTQsNC70LjQu9C4INC60LvQsNGB0YEg0LLQuNC00LjQvNC+0YHRgtC4INCx0LvQvtC60LAg0L7RiNC40LHQutC4IHNwYW5cbiAgICBmb3JtRXJyb3IudGV4dENvbnRlbnQgPSAnJzsgLy/QntGH0LjRgdGC0LjQu9C4INGB0L7QtNC10YDQttC40LzQvtC1INCx0LvQvtC60LAg0L7RiNC40LHQutC4IHNwYW5cbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JDbGFzcyk7IC8v0KPQsdGA0LDQu9C4INC/0L7QtNGH0LXRgNC60LjQstCw0L3QuNC1INC60YDQsNGB0L3Ri9C8INC/0L7Qu9C1INC40L3Qv9GD0YLQsFxuICB9O1xuICAvLyDQpNGD0L3QutGG0LjRjyDQtNC+0LHQsNCy0LvRj9C10YIg0YHQu9GD0YjQsNGC0LXQu9GPINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0L7QsdGL0YLQuNGPINC00LvRjyDQutCw0LbQtNC+0LPQviDQv9C+0LvRjyDQstCy0L7QtNCwXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICAvLyDQlNC10LvQsNC10Lwg0LrQvdC+0L/QutGDINCh0L7RhdGA0LDQvdC40YLRjCDQvdC10LDQutGC0LjQstC90L7QuSDQv9GA0Lgg0L7RgtC60YDRi9GC0LjQuCDRhNC+0YDQvNGLXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcblxuICAgIC8vINCe0LHQvtC50LTRkdC8INCy0YHQtSDRjdC70LXQvNC10L3RgtGLINC/0L7Qu9GD0YfQtdC90L3QvtC5INC60L7Qu9C70LXQutGG0LjQuFxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgLy8g0LrQsNC20LTQvtC80YMg0L/QvtC70Y4g0LTQvtCx0LDQstC40Lwg0L7QsdGA0LDQsdC+0YLRh9C40Log0YHQvtCx0YvRgtC40Y8gaW5wdXRcbiAgICAgIFxuICAgICAgaW5wdXQuYWRkRXZlbnRMaXN0ZW5lcignaW5wdXQnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuX2lzVmFsaWQoaW5wdXQpO1xuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgfTtcblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3BvcHVwRm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB7XG4gICAgICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgICB9KTtcblxuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICAvL9CU0LXQsNC60YLQuNCy0LDRhtC40Y8g0LrQvdC+0L/QutC4INCh0L7RhdGA0LDQvdC40YLRjFxuICAvL9Ch0LTQtdC70LDRgtGMINC60L3QvtC/0LrRgyDQodC+0YXRgNCw0L3QuNGC0Ywg0L3QtdCw0LrRgtC40LLQvdC+0LlcbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9zYXZlQnRuLmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7IC8vINCU0L7QsdCw0LLQu9GP0LXRgiDQvdC10LDQutGC0LjQstC90YvQuSDQutC70LDRgdGBXG4gICAgdGhpcy5fc2F2ZUJ0bi5kaXNhYmxlZCA9IHRydWU7IC8v0J7RgtC60LvRjtGH0LDQtdGCINC60L3QvtC/0LrRg1xuICB9XG4gIC8v0KHQtNC10LvQsNGC0Ywg0LrQvdC+0L/QutGDINCh0L7RhdGA0LDQvdC40YLRjCDQsNC60YLQuNCy0L3QvtC5XG4gIF9lbmFibGVCdXR0b24oKSB7XG4gICAgdGhpcy5fc2F2ZUJ0bi5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MpOy8vINCj0LTQsNC70Y/QtdGCINC90LXQsNC60YLQuNCy0L3Ri9C5INC60LvQsNGB0YFcbiAgICB0aGlzLl9zYXZlQnRuLmRpc2FibGVkID0gZmFsc2U7IC8v0JLQutC70Y7Rh9Cw0LXRgiDQutC90L7Qv9C60YNcbiAgfVxuICAvL9CQ0LrRgtC40LLQsNGG0LjRjyDQuCDQtNC10LDQutGC0LjQstCw0YbQuNGPINC60L3QvtC/0LrQuCDQodC+0YXRgNCw0L3QuNGC0Ywg0LjRgdGF0L7QtNGPINC40Lcg0LjRgtC+0LPQvtCyINC/0YDQvtCy0LXRgNC60Lgg0LjQvdC/0YPRgtC+0LJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xuICAgIGNvbnN0IGZvcm1WYWxpZCA9IHRoaXMuX2hhc0lucHV0c1ZhbGlkKClcbiAgICBpZiAoZm9ybVZhbGlkKSB7XG4gICAgICB0aGlzLmRpc2FibGVCdXR0b24oKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG4gIC8v0J/RgNC+0LLQtdGA0Y/QtdC8INCy0YHQtSDQuNC90L/Rg9GC0Ysg0L3QsCDQstCw0LvQuNC00L3QvtGB0YLRjCDQsiDRhNC+0YDQvNC1XG4gIF9oYXNJbnB1dHNWYWxpZCgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5wdXRMaXN0LnNvbWUoKGlucHV0KSA9PiB7XG4gICAgICByZXR1cm4gIWlucHV0LnZhbGlkaXR5LnZhbGlkO1xuICAgIH0pXG4gIH1cblxuICByZXNldFRleHRFcnJvcigpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKGl0ZW0pO1xuICAgIH0pO1xuICB9XG5cbn1cblxuXG5cblxuXG5cbiIsIi8v0L7RgtCy0LXRh9Cw0LXRgiDQt9CwINC+0YLQutGA0YvRgtC40LUg0Lgg0LfQsNC60YDRi9GC0LjQtSDQv9C+0L/QsNC/0LBcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yKXtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fY2xvc2VCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlLWJ1dHRvbicpO1xuICAgIC8vdGhpcy5jbG9zZSA9IHRoaXMuY2xvc2UuYmluZCh0aGlzKTtcbiAgICAvL3RoaXMub3BlbiA9IHRoaXMub3Blbi5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZUVzY0Nsb3NlID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZCgncG9wdXBfb3BlbmVkJyk7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICBcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICAgIGRvY3VtZW50LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCB0aGlzLl9oYW5kbGVFc2NDbG9zZSk7XG4gIH1cblxuICBfaGFuZGxlRXNjQ2xvc2UoZXZ0KSB7XG4gICAgaWYgKGV2dC5rZXkgPT09ICdFc2NhcGUnKSB7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfTtcbiAgfVxuXG4gIF9jbG9zZVByZXNzT3ZlcmxheShldnQpIHtcbiAgICAgIGlmIChldnQuY3VycmVudFRhcmdldCA9PT0gZXZ0LnRhcmdldCkge1xuICAgICAgICB0aGlzLmNsb3NlKCk7XG4gICAgICB9XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jbG9zZUJ0bi5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHRoaXMuY2xvc2UoKSk7XG4gICAgdGhpcy5fcG9wdXAuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgKGV2dCk9PiB0aGlzLl9jbG9zZVByZXNzT3ZlcmxheShldnQpKTtcbiAgfVxufVxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aEZvcm0gZXh0ZW5kcyBQb3B1cHtcbiAgY29uc3RydWN0b3IoIHBvcHVwU2VsZWN0b3IsIGFwaUNhbGxCYWNrKSB7XG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5faW5wdXRzTGlzdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9mb3JtID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtJyk7XG4gICAgdGhpcy5fYXBpQ2FsbEJhY2sgPSBhcGlDYWxsQmFjaztcbiAgICB0aGlzLl9zdWJtaXRCdG4gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUtYnV0dG9uJylcbiAgfVxuXG4gIC8v0LzQtdGC0L7QtCDQutC+0YLQvtGA0YvQuSDRgdC+0LHQuNGA0LDQtdGCINC00LDQvdC90YvQtSDQstGB0LXRhSDQv9C+0LvQtdC5INGE0L7RgNC80YtcbiAgX2dldElucHV0VmFsdWVzKCkge1xuICAgIHRoaXMuX2RhdGEgPSB7fVxuICAgIHRoaXMuX2lucHV0c0xpc3QuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIHRoaXMuX2RhdGFbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gdGhpcy5fZGF0YTtcbiAgfVxuXG4gIC8v0J/QtdGA0LXQt9Cw0L/QuNGB0YvQstCw0LXRgiDRgNC+0LTQuNGC0LXQu9GM0YHQutC40Lkg0LzQtdGC0L7QtCBzZXRFdmVudExpc3RlbmVycy4g0JzQtdGC0L7QtCBzZXRFdmVudExpc3RlbmVycyDQutC70LDRgdGB0LAgUG9wdXBXaXRoRm9ybSDQtNC+0LvQttC10L0g0L3QtSDRgtC+0LvRjNC60L4g0LTQvtCx0LDQstC70Y/RgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INC60LvQuNC60LAg0LjQutC+0L3QutC1INC30LDQutGA0YvRgtC40Y8sINC90L4g0Lgg0LTQvtCx0LDQstC70Y/RgtGMINC+0LHRgNCw0LHQvtGC0YfQuNC6INGB0LDQsdC80LjRgtCwINGE0L7RgNC80YsuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCB0aGlzLnN1Ym1pdEhhbmRsZXIpO1xuICB9XG5cbiAgLy/Qn9C10YDQtdC30LDQv9C40YHRi9Cy0LDQtdGCINGA0L7QtNC40YLQtdC70YzRgdC60LjQuSDQvNC10YLQvtC0IGNsb3NlLCDRgtCw0Log0LrQsNC6INC/0YDQuCDQt9Cw0LrRgNGL0YLQuNC4INC/0L7Qv9Cw0L/QsCDRhNC+0YDQvNCwINC00L7Qu9C20L3QsCDQtdGJ0ZEg0Lgg0YHQsdGA0LDRgdGL0LLQsNGC0YzRgdGPLlxuICBjbG9zZSgpIHtcbiAgICBzdXBlci5jbG9zZSgpO1xuICAgIHRoaXMuX2Zvcm0ucmVzZXQoKTtcbiAgfVxuXG4gIC8v0JzQtdGC0L7QtCwg0LrQvtGC0L7RgNGL0Lkg0L7RgtC/0YDQsNCy0LvRj9C10YIg0YHQvtCx0YDQsNC90L3Ri9C1INC00LDQvdC90YvQtSDQvdCwINGB0LXRgNCy0LXRgFxuICBzdWJtaXRIYW5kbGVyID0gKCkgPT4ge1xuICAgIGNvbnN0IGluZm8gPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpOyAvL9Cx0LXRgNC10Lwg0YHQvtCx0YDQsNC90L3Ri9C1INC00LDQvdC90YvQtSDQuCDRgdC+0YXRgNCw0L3Rj9C10Lwg0LIg0L/QtdGA0LXQvNC10L3QvdGD0Y5cbiAgICB0aGlzLl9hcGlDYWxsQmFjayhpbmZvKTsgLy/QktGL0LfRi9Cy0LDRjiDQvNC10YLQvtC0IGFwaUNhbGxCYWNrXG4gIH1cblxuICBsb2FkaW5nSW5Qcm9jZXNzKCkge1xuICAgIHRoaXMuX3N1Ym1pdEJ0bi50ZXh0Q29udGVudCA9ICfQodC+0YXRgNCw0L3QtdC90LjQtS4uLic7XG4gIH1cblxuICBsb2FkaW5nRG9uZSh0ZXh0KSB7XG4gICAgdGhpcy5fc3VibWl0QnRuLnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG59XG5cblxuXG4iLCJcbmV4cG9ydCBjb25zdCBmb3JtRWxlbWVudFByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0tcHJvZmlsZScpO1xuZXhwb3J0IGNvbnN0IGZvcm1OZXdQbGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybS1wbGFjZScpO1xuZXhwb3J0IGNvbnN0IGZvcm1BdmF0YXJFZGl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19mb3JtLWF2YXRhcicpO1xuZXhwb3J0IGNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNlbGVtZW50LXRlbXBsYXRlJyk7XG5leHBvcnQgY29uc3Qgc2V0dGluZ3MgPSB7XG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZm9ybScsXG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUtYnV0dG9uJyxcbiAgaW5hY3RpdmVCdXR0b25DbGFzczogJ3BvcHVwX19zYXZlLWJ1dHRvbl9pbmFjdGl2ZScsXG4gIGlucHV0RXJyb3JDbGFzczogJ3BvcHVwX19mb3JtX3R5cGVfZXJyb3InLFxuICBlcnJvckNsYXNzOiAncG9wdXBfX2Vycm9yLXRleHRfc3RhdHVzX2FjdGl2ZSdcbn07XG5leHBvcnQgY29uc3QgbXlUb2tlbiA9ICc2ZjdkNGVlMi0xMTMzLTQ5M2YtOGRjNS1jZGU3YTU4NmRkMTInO1xuZXhwb3J0IGNvbnN0IHByb2ZpbGVPcGVuQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX2VkaXQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgY2FyZEFkZEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hZGQtYnV0dG9uJyk7XG5leHBvcnQgY29uc3QgYXZhdGFyRWRpdEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19hdmF0YXItZWRpdCcpO1xuZXhwb3J0IGNvbnN0IG5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9faW5wdXRfZmllbGRfbmFtZScpO1xuZXhwb3J0IGNvbnN0IGpvYklucHV0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbnB1dF9maWVsZF9vY2N1cGF0aW9uJyk7XG5cblxuXG5cbiIsImltcG9ydCAnLi9wYWdlcy9pbmRleC5jc3MnO1xuaW1wb3J0IENhcmQgZnJvbSAnLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSAnLi9jb21wb25lbnRzL0Zvcm1WYWxpZGF0b3IuanMnO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSAnLi9jb21wb25lbnRzL1NlY3Rpb24uanMnO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gJy4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoRm9ybSBmcm9tICcuL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyc7XG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzJztcbmltcG9ydCBBcGkgZnJvbSAnLi9jb21wb25lbnRzL0FwaS5qcyc7XG5pbXBvcnQgUG9wdXBXaXRoU3VibWl0IGZyb20gJy4vY29tcG9uZW50cy9Qb3B1cFdpdGhTdWJtaXQuanMnO1xuaW1wb3J0IHsgZm9ybUVsZW1lbnRQcm9maWxlLCBmb3JtTmV3UGxhY2UsIGZvcm1BdmF0YXJFZGl0LCBjYXJkVGVtcGxhdGUsIHNldHRpbmdzLCBteVRva2VuLCBwcm9maWxlT3BlbkJ0biwgY2FyZEFkZEJ0biwgYXZhdGFyRWRpdEJ0biwgbmFtZUlucHV0LCBqb2JJbnB1dH0gZnJvbSAnLi91dGlscy9jb25zdGFudHMuanMnO1xuXG5sZXQgb3duZXJJZDtcblxuLy/QpNC+0YDQvNGLINC40Lcg0LrQu9Cw0YHRgdCwIEZvcm1WYWxpZGF0b3JcbmNvbnN0IGZvcm1WYWxpZGF0aW9uUHJvZmlsZSA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtRWxlbWVudFByb2ZpbGUpO1xuY29uc3QgZm9ybVZhbGlkYXRpb25OZXdDYXJkID0gbmV3IEZvcm1WYWxpZGF0b3Ioc2V0dGluZ3MsIGZvcm1OZXdQbGFjZSk7XG5jb25zdCBmb3JtVmFsaWRhdGlvbkF2YXRhciA9IG5ldyBGb3JtVmFsaWRhdG9yKHNldHRpbmdzLCBmb3JtQXZhdGFyRWRpdCk7XG5cbi8v0KHQvtC30LTQsNGOINC90L7QstGL0Lkg0LrQu9Cw0YHRgSDQtNC70Y8g0LjRgdC/0L7Qu9GM0LfQvtCy0LDQvdC40Y8gYXBpXG5jb25zdCBhcGkgPSBuZXcgQXBpICh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxLycsXG4gIGhlYWRlcnM6IHtcbiAgICBhdXRob3JpemF0aW9uOiBteVRva2VuLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cblByb21pc2UuYWxsKFtcbiAgYXBpLmdldEluZm8oKSxcbiAgYXBpLmdldENhcmRzKClcbl0pXG4udGhlbih2YWx1ZSA9PiB7XG4gIGNvbnN0IHVzZXJJbmZvID0gdmFsdWVbMF07XG4gIGNvbnN0IGNhcmRzID0gdmFsdWVbMV07XG4gIG93bmVySWQgPSB1c2VySW5mby5faWQ7XG4gIGNhcmRzLmZvckVhY2goY2FyZCA9PiB7XG4gICAgY2FyZC5vd25lcklkID0gdXNlckluZm8uX2lkO1xuICB9KTtcbiAgaW5pdGlhbENhcmRzTGlzdC5yZW5kZXJlckNhcmRzKGNhcmRzKTtcbiAgdXNlci5zZXRVc2VySW5mbyh1c2VySW5mbyk7XG4gIHVzZXIuc2V0VXNlckF2YXRhcih1c2VySW5mbyk7XG5cbn0pXG4uY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG5cbmNvbnN0IHNlbmRBcmdUb0NsYXNzQ2FyZCA9ICguLi5hcmcpID0+IG5ldyBDYXJkKC4uLmFyZyk7XG5cbi8vUG9wdXAgZGVsZXRlIGNvbmZpcm1hdGlvblxuY29uc3Qgc3VibWl0UG9wdXAgPSBuZXcgUG9wdXBXaXRoU3VibWl0KCcucG9wdXBfdHlwZV9kZWxldGUtY29uZmlybScpO1xuc3VibWl0UG9wdXAuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuLy9Qb3B1cCBhdmF0YXIgZWRpdFxuY29uc3QgcG9wdXBBdmF0YXJFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX2F2YXRhci1lZGl0Jywgc2VuZE5ld0F2YXRhckFwaSlcbnBvcHVwQXZhdGFyRWRpdC5zZXRFdmVudExpc3RlbmVycygpXG5cbmZ1bmN0aW9uIHNlbmROZXdBdmF0YXJBcGkoaXRlbSkge1xuICBwb3B1cEF2YXRhckVkaXQubG9hZGluZ0luUHJvY2VzcygpO1xuICBhcGkuY2hhbmdlQXZhdGFyKGl0ZW0pXG4gIC50aGVuKHJlcyA9PiB7XG4gICAgdXNlci5zZXRVc2VyQXZhdGFyKHJlcyk7XG4gICAgcG9wdXBBdmF0YXJFZGl0LmNsb3NlKCk7XG5cbiAgfSlcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAuZmluYWxseSgoKSA9PiBwb3B1cEF2YXRhckVkaXQubG9hZGluZ0RvbmUoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpKVxufVxuXG4vLyoqKioqUG9wdXAgZWRpdCoqKioqXG4vL9Ce0LHRitGP0LLQu9GP0Y4g0LrQu9Cw0YHRgSDQtNC70Y8g0LjQvdGE0L7RgNC80LDRhtC40Lgg0L4g0L/QvtC70YzQt9C+0LLQsNGC0LXQu9C1XG5jb25zdCB1c2VyID0gbmV3IFVzZXJJbmZvICh7XG4gIG5hbWVTZWxlY3RvcjogJy5wcm9maWxlX190aXRsZScsXG4gIG9jY3VwYXRpb25TZWxlY3RvcjogJy5wcm9maWxlX19zdWJ0aXRsZScsXG4gIGF2YXRhclNlbGVjdG9yOiAnLnByb2ZpbGVfX2F2YXRhcidcbn0pXG5cbi8vUG9wdXAgcHJvZmlsZSBlZGl0XG5jb25zdCBwb3B1cFByb2ZpbGVFZGl0ID0gbmV3IFBvcHVwV2l0aEZvcm0oJy5wb3B1cF90eXBlX3Byb2ZpbGUtZWRpdCcsIG5ld1Byb2ZpbGVEYXRhQXBpKTtcbnBvcHVwUHJvZmlsZUVkaXQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuZnVuY3Rpb24gbmV3UHJvZmlsZURhdGFBcGkoaXRlbSkge1xuICBwb3B1cFByb2ZpbGVFZGl0LmxvYWRpbmdJblByb2Nlc3MoKTtcbiAgYXBpLnNlbmROZXdQcm9maWxlRGF0YShpdGVtKVxuICAudGhlbihyZXMgPT4ge1xuICAgIHVzZXIuc2V0VXNlckluZm8ocmVzKTtcbiAgICBwb3B1cFByb2ZpbGVFZGl0LmNsb3NlKCk7XG4gIH0pXG4gIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgLmZpbmFsbHkoKCk9PiBwb3B1cFByb2ZpbGVFZGl0LmxvYWRpbmdEb25lKCfQodC+0YXRgNCw0L3QuNGC0YwnKSlcbn1cblxuLy9Qb3B1cCBuZXcgY2FyZCBhZGRcbmNvbnN0IHBvcHVwQWRkTmV3Q2FyZCA9IG5ldyBQb3B1cFdpdGhGb3JtICgnLnBvcHVwX3R5cGVfbmV3LWNhcmQnLCBhZGROZXdDYXJkQXBpKTtcbnBvcHVwQWRkTmV3Q2FyZC5zZXRFdmVudExpc3RlbmVycygpO1xuXG5mdW5jdGlvbiBhZGROZXdDYXJkQXBpKGl0ZW0pIHtcbiAgcG9wdXBBZGROZXdDYXJkLmxvYWRpbmdJblByb2Nlc3MoKTtcbiAgYXBpLnNlbmROZXdDYXJkRGF0YShpdGVtKVxuICAudGhlbih2YWx1ZSA9PiB7XG4gICAgdmFsdWUub3duZXJJZCA9IG93bmVySWQ7XG4gICAgaW5pdGlhbENhcmRzTGlzdC5hZGRJdGVtKGNyZWF0ZU5ld0NhcmRKdXN0KHZhbHVlKSk7XG4gICAgcG9wdXBBZGROZXdDYXJkLmNsb3NlKClcbiAgfSlcbiAgLmNhdGNoKGVyciA9PiBjb25zb2xlLmxvZyhlcnIpKVxuICAuZmluYWxseSgoKT0+IHBvcHVwQWRkTmV3Q2FyZC5sb2FkaW5nRG9uZSgn0KHQvtGF0YDQsNC90LjRgtGMJykpXG59XG5cbmZ1bmN0aW9uIGRlbGV0ZUNhcmRBcGkoaXRlbSwgY2FyZCkge1xuICBzdWJtaXRQb3B1cC5zZXRTdWJtaXRBY3Rpb24oKCkgPT4ge1xuICAgIHN1Ym1pdFBvcHVwLmxvYWRpbmdJblByb2Nlc3MoKTtcbiAgICBzdWJtaXRQb3B1cC5kaXNhYmxlU3VibWl0QnRuKCk7XG4gICAgYXBpLmRlbGV0ZUNhcmQoaXRlbSwgY2FyZClcbiAgICAudGhlbigoKSA9PiB7XG4gICAgICBjYXJkLnJlbW92ZSgpO1xuICAgICAgY2FyZCA9IG51bGw7XG4gICAgICBzdWJtaXRQb3B1cC5jbG9zZSgpO1xuICAgIH0pLmNhdGNoKChlcnIpID0+IGNvbnNvbGUubG9nKGVycikpXG4gICAgLmZpbmFsbHkoKCk9PiBzdWJtaXRQb3B1cC5sb2FkaW5nRG9uZSgn0JTQsCcpKVxuICB9KTtcbiAgc3VibWl0UG9wdXAuZW5hYmxlU3VibWl0QnRuKCk7XG4gIHN1Ym1pdFBvcHVwLm9wZW4oKTtcbiAgc3VibWl0UG9wdXAuc3VibWl0KCk7XG59XG5cbmNvbnN0IGltYWdlUHJldmlldyA9IG5ldyBQb3B1cFdpdGhJbWFnZSgnLnBvcHVwX3R5cGVfdmlldy1pbWFnZScpO1xuaW1hZ2VQcmV2aWV3LnNldEV2ZW50TGlzdGVuZXJzKCk7XG5cbmNvbnN0IGluaXRpYWxDYXJkc0xpc3QgPSBuZXcgU2VjdGlvbihjcmVhdGVOZXdDYXJkSnVzdCwgJy5lbGVtZW50cycpO1xuXG5mdW5jdGlvbiBoYW5kbGVDYXJkQ2xpY2soY2FyZFBpYykge1xuICBpbWFnZVByZXZpZXcub3BlbihjYXJkUGljKTtcbn07XG5cbi8v0KHQu9GD0YjQsNGC0LXQu9C4INGB0L4g0YHRgdGL0LvQutC+0Lkg0L3QsCDQutC70LDRgdGB0YtcbnByb2ZpbGVPcGVuQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBjb25zdCB1c2VySW5mbyA9IHVzZXIuZ2V0VXNlckluZm8oKTtcbiAgbmFtZUlucHV0LnZhbHVlID0gdXNlckluZm8ubmFtZTtcbiAgam9iSW5wdXQudmFsdWUgPSB1c2VySW5mby5hYm91dDtcbiAgcG9wdXBQcm9maWxlRWRpdC5vcGVuKCk7XG4gIGZvcm1WYWxpZGF0aW9uUHJvZmlsZS5yZXNldFRleHRFcnJvcigpO1xuICAvL3BvcHVwUHJvZmlsZUVkaXQubG9hZGluZ0RvbmUoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xufSk7XG5cbmF2YXRhckVkaXRCdG4uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gIHBvcHVwQXZhdGFyRWRpdC5vcGVuKCk7XG4gIHBvcHVwQXZhdGFyRWRpdC5sb2FkaW5nRG9uZSgn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gIGZvcm1WYWxpZGF0aW9uQXZhdGFyLnJlc2V0VGV4dEVycm9yKCk7XG59KVxuXG5jYXJkQWRkQnRuLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xuICBwb3B1cEFkZE5ld0NhcmQub3BlbigpO1xuICBmb3JtVmFsaWRhdGlvbk5ld0NhcmQucmVzZXRUZXh0RXJyb3IoKTtcbiAgLy9wb3B1cEFkZE5ld0NhcmQubG9hZGluZ0RvbmUoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xufSk7XG5cbmZvcm1WYWxpZGF0aW9uUHJvZmlsZS5lbmFibGVWYWxpZGF0aW9uKCk7XG5mb3JtVmFsaWRhdGlvbk5ld0NhcmQuZW5hYmxlVmFsaWRhdGlvbigpO1xuZm9ybVZhbGlkYXRpb25BdmF0YXIuZW5hYmxlVmFsaWRhdGlvbigpO1xuXG4vL9GE0YPQvdC60YbQuNGPINGB0L7Qt9C00LDQvdC40Y8g0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4XG5mdW5jdGlvbiBjcmVhdGVOZXdDYXJkSnVzdCAoaXRlbSkge1xuICBjb25zdCBjYXJkID0gc2VuZEFyZ1RvQ2xhc3NDYXJkKFxuICAgIGl0ZW0sXG4gICAgY2FyZFRlbXBsYXRlLFxuICAgIGhhbmRsZUNhcmRDbGljayxcbiAgICBkZWxldGVDYXJkQXBpKVxuXG4gIGNhcmQuc2VuZExpa2VBcGkoKCkgPT4ge1xuICAgIGFwaS5zZW5kTGlrZShpdGVtKVxuICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICBjYXJkLmhhbmRsZXJMaWtlKHJlcyk7XG4gICAgfSlcbiAgICAuY2F0Y2goZXJyID0+IGNvbnNvbGUubG9nKGVycikpXG4gIH0pLFxuICBjYXJkLmRlbGV0ZUxpa2VBcGkoKCkgPT4ge1xuICAgIGFwaS5kZWxldGVMaWtlKGl0ZW0pXG4gICAgLnRoZW4ocmVzID0+IHtcbiAgICAgIGNhcmQuaGFuZGxlckxpa2UocmVzKTtcbiAgICB9KVxuICAgIC5jYXRjaChlcnIgPT4gY29uc29sZS5sb2coZXJyKSlcbiAgfSk7XG5cbiAgcmV0dXJuIGNhcmQuY3JlYXRlQ2FyZCgpO1xufVxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgQXBpIHtcbiAgY29uc3RydWN0b3IoeyBiYXNlVXJsLCBoZWFkZXJzIH0pIHtcbiAgICB0aGlzLl91cmwgPSBiYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xuICB9XG4gIC8v0LzQtdGC0L7QtCDQt9Cw0LPRgNGD0LbQsNC10YIg0LTQsNC90L3Ri9C1INC/0L7Qu9GM0LfQvtCy0LDRgtC10LvRjyDRgSDRgdC10YDQstC10YDQsCDQuCDQstC+0LfQstGA0LDRidCw0LXRgiDQuNGFINC60LDQuiDQvtCx0YrQtdC60YJcbiAgZ2V0SW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8v0LzQtdGC0L7QtCDQt9Cw0L/RgNCw0YjQuNCy0LDQtdGCINC00LDQvdC90YvQtSDRgSDQutCw0YDRgtC+0YfQutCw0LzQuCDRgSDRgdC10YDQstC10YDQsFxuICBnZXRDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzYCwge1xuICAgICAgbWV0aG9kOiAnR0VUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG4gIC8v0JzQtdGC0L7QtCDQvtGC0L/RgNCw0LLQu9GP0LXRgiDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC90LAg0YHQtdGA0LLQtdGAXG4gIHNlbmROZXdQcm9maWxlRGF0YShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH11c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICAvL9Cc0LXRgtC+0LQg0L7RgtC/0YDQsNCy0LvRj9C10YIg0LTQsNC90L3Ri9C1INC90L7QstC+0Lkg0LrQsNGA0YLQvtGH0LrQuCDQvdCwINGB0LXRgNCy0LXRgFxuICBzZW5kTmV3Q2FyZERhdGEoZGF0YSkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl91cmx9Y2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzLyR7ZGF0YS5faWR9YCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgY2hhbmdlQXZhdGFyKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfXVzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogJ1BBVENIJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeShkYXRhKVxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBzZW5kTGlrZShkYXRhKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX3VybH1jYXJkcy8ke2RhdGEuX2lkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pXG4gICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVMaWtlKGRhdGEpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fdXJsfWNhcmRzLyR7ZGF0YS5faWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSlcbiAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIF9jaGVja1Jlc3BvbnNlKHJlcykge1xuICAgIGlmIChyZXMub2spIHtcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIH1cbiAgICByZXR1cm4gUHJvbWlzZS5yZWplY3QoYEVycm9yOiAke3Jlcy5zdGF0dXN9YClcbn1cblxufVxuXG5cblxuXG4iLCJpbXBvcnQgUG9wdXAgZnJvbSAnLi9Qb3B1cC5qcyc7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aFN1Ym1pdCBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3N1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZS1idXR0b24nKTtcbiAgfVxuXG4gIHNldFN1Ym1pdEFjdGlvbihzdWJtaXRBY3Rpb24pIHtcbiAgICB0aGlzLl9oYW5kbGVTdWJtaXRDYWxsYmFjayA9IHN1Ym1pdEFjdGlvbjtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cblxuICBjbG9zZSgpe1xuICAgIHN1cGVyLmNsb3NlKCk7XG4gICAgdGhpcy5fc3VibWl0LnJlbW92ZUV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgdGhpcy5faGFuZGxlU3VibWl0Q2FsbGJhY2spO1xuICB9XG5cbiAgc3VibWl0KCkge1xuICAgIHRoaXMuX3N1Ym1pdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIHRoaXMuX2hhbmRsZVN1Ym1pdENhbGxiYWNrKTtcbiAgfVxuXG4gIGxvYWRpbmdJblByb2Nlc3MoKSB7XG4gICAgdGhpcy5fc3VibWl0LnRleHRDb250ZW50ID0gJ9Cj0LTQsNC70LXQvdC40LUuLi4nXG4gIH1cblxuICBsb2FkaW5nRG9uZSgpIHtcbiAgICB0aGlzLl9zdWJtaXQudGV4dENvbnRlbnQgPSAn0JTQsCc7XG4gIH1cblxuICBkaXNhYmxlU3VibWl0QnRuKCkge1xuICAgIHRoaXMuX3N1Ym1pdC5kaXNhYmxlZCA9IHRydWU7XG4gIH1cblxuICBlbmFibGVTdWJtaXRCdG4oKSB7XG4gICAgdGhpcy5fc3VibWl0LmRpc2FibGVkID0gZmFsc2U7XG4gIH1cbn1cblxuXG5cblxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3RvciAoe25hbWVTZWxlY3Rvciwgb2NjdXBhdGlvblNlbGVjdG9yLCBhdmF0YXJTZWxlY3Rvcn0pIHtcbiAgICB0aGlzLl9uYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihuYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX29jY3VwYXRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKG9jY3VwYXRpb25TZWxlY3Rvcik7XG4gICAgdGhpcy5fYXZhdGFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihhdmF0YXJTZWxlY3Rvcik7XG4gIH1cblxuICAvL9Cy0L7Qt9Cy0YDQsNGJ0LDQtdGCINC+0LHRitC10LrRgiDRgSDQtNCw0L3QvdGL0LzQuCDQv9C+0LvRjNC30L7QstCw0YLQtdC70Y8uINCt0YLQvtGCINC80LXRgtC+0LQg0L/RgNC40LPQvtC00LjRgtGB0Y8g0LrQvtCz0LTQsCDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC90YPQttC90L4g0LHRg9C00LXRgiDQv9C+0LTRgdGC0LDQstC40YLRjCDQsiDRhNC+0YDQvNGDINC/0YDQuCDQvtGC0LrRgNGL0YLQuNC4LlxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4ge1xuICAgICAgbmFtZTogdGhpcy5fbmFtZS50ZXh0Q29udGVudCxcbiAgICAgIGFib3V0OiB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50XG4gICAgfVxuICB9XG5cbiAgLy/Qv9GA0LjQvdC40LzQsNC10YIg0L3QvtCy0YvQtSDQtNCw0L3QvdGL0LUg0L/QvtC70YzQt9C+0LLQsNGC0LXQu9GPINC4INC00L7QsdCw0LLQu9GP0LXRgiDQuNGFINC90LAg0YHRgtGA0LDQvdC40YbRgy5cbiAgc2V0VXNlckluZm8odXNlckluZm8pIHtcbiAgICB0aGlzLl9uYW1lLnRleHRDb250ZW50ID0gdXNlckluZm8ubmFtZTtcbiAgICB0aGlzLl9vY2N1cGF0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8uYWJvdXQ7XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKHVzZXJJbmZvKSB7XG4gICAgdGhpcy5fYXZhdGFyLnNyYyA9IHVzZXJJbmZvLmF2YXRhclxuICB9XG59XG5cblxuXG5cbiIsImltcG9ydCBQb3B1cCBmcm9tICcuL1BvcHVwLmpzJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XG5cbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2ltYWdlID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWcnKTtcbiAgICB0aGlzLl9jYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19pbWctdGl0bGUnKTtcblxuICB9XG4gIC8v0J3QsNGB0LvQtdC00YPQtdGCINC80LXRgtC+0LQg0L7RgiDRgNC+0LTQuNGC0LXQu9GPINC4INC00L7QsdCw0LLQu9GP0LXRgiDQv9C+0LTRgdGC0LDQvdC+0LLQutGDINGB0YHRi9C70LrQuCDQutCw0YDRgtC40L3QutC4INC4INC40LzRjyDQutCw0YDRgtC40L3QutC4XG4gIG9wZW4oY2FyZFBpYykge1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgICB0aGlzLl9jYXB0aW9uLnRleHRDb250ZW50ID0gY2FyZFBpYy5uYW1lO1xuICAgIHRoaXMuX2ltYWdlLnNyYyA9IGNhcmRQaWMubGluaztcbiAgICB0aGlzLl9pbWFnZS5hbHQgPSBjYXJkUGljLm5hbWU7XG4gIH1cbn1cblxuXG5cblxuXG5cblxuIiwiLy/QvtGC0LLQtdGH0LDQtdGCINC30LAg0L7RgtGA0LjRgdC+0LLQutGDINGN0LvQtdC80LXQvdGC0L7QsiDQvdCwINGB0YLRgNCw0L3QuNGG0LVcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHJlbmRlcmVyLCBjb250YWluZXJTZWxlY3Rvcil7XG4gICAgdGhpcy5fcmVuZGVyZXIgPSByZW5kZXJlcjsgLy/RjdGC0L4g0YTRg9C90LrRhtC40Y8sINC60L7RgtC+0YDQsNGPINC+0YLQstC10YfQsNC10YIg0LfQsCDRgdC+0LfQtNCw0L3QuNC1INC4INC+0YLRgNC40YHQvtCy0LrRgyDQtNCw0L3QvdGL0YUg0L3QsCDRgdGC0YDQsNC90LjRhtC1XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcihjb250YWluZXJTZWxlY3Rvcik7IC8v0YHQtdC70LXQutGC0L7RgCDQutC+0L3RgtC10LnQvdC10YDQsCwg0LIg0LrQvtGC0L7RgNGL0Lkg0L3Rg9C20L3QviDQtNC+0LHQsNCy0LvRj9GC0Ywg0YHQvtC30LTQsNC90L3Ri9C1INGN0LvQtdC80LXQvdGC0YsuXG4gIH1cblxuICAvL9C+0YLQstC10YfQsNC10YIg0LfQsCDQvtGC0YDQuNGB0L7QstC60YMg0LLRgdC10YUg0Y3Qu9C10LzQtdC90YLQvtCyLlxuICByZW5kZXJlckNhcmRzKGNhcmRzKSB7XG4gICAgY2FyZHMucmV2ZXJzZSgpLmZvckVhY2goY2FyZCA9PiB7XG4gICAgICB0aGlzLmFkZEl0ZW0odGhpcy5fcmVuZGVyZXIoY2FyZCkpO1xuICAgICAgcmV0dXJuIGNhcmRcbiAgICB9KVxuICB9XG5cbiAgLy/Qv9GA0LjQvdC40LzQsNC10YIgRE9NLdGN0LvQtdC80LXQvdGCINC4INC00L7QsdCw0LLQu9GP0LXRgiDQtdCz0L4g0LIg0LrQvtC90YLQtdC50L3QtdGAXG4gIGFkZEl0ZW0oY2FyZCkge1xuICAgIHRoaXMuX2NvbnRhaW5lci5wcmVwZW5kKGNhcmQpO1xuICB9XG5cbn1cblxuIl0sIm5hbWVzIjpbIkNhcmQiLCJjb25zdHJ1Y3RvciIsImluZm9DYXJkIiwidGVtcGxhdGVDYXJkIiwiaGFuZGxlQ2FyZENsaWNrIiwib3BlbkYiLCJzZW5kTGlrZUFwaSIsImRlbGV0ZUxpa2VBcGkiLCJ0aGlzIiwiX2luZm9DYXJkIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX3RlbXBsYXRlQ2FyZCIsIl9waWMiLCJfaGFuZGxlQ2FyZENsaWNrIiwiX29wZW5GIiwiX2xpa2VzIiwibGlrZXMiLCJfb3duZXJJZCIsIm93bmVySWQiLCJfdXNlckxpa2VkIiwic29tZSIsImxpa2UiLCJfaWQiLCJfY2FyZElkIiwiX3NlbmRMaWtlQXBpIiwiX2RlbGV0ZUxpa2VBcGkiLCJjcmVhdGVDYXJkIiwiX2NhcmQiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJxdWVyeVNlbGVjdG9yIiwic3JjIiwidGV4dENvbnRlbnQiLCJhbHQiLCJfbGlrZUJ0biIsIl9saWtlTnVtIiwibGVuZ3RoIiwiX2lzVXNlck93bmVyIiwicmVtb3ZlIiwiY2xhc3NMaXN0IiwiYWRkIiwiX2FkZExpc3RlbmVycyIsIl9pc0NhcmRMaWtlZCIsIm93bmVyIiwiYWRkRXZlbnRMaXN0ZW5lciIsImhhbmRsZXJMaWtlIiwicmVzIiwidG9nZ2xlIiwicmVtb3ZlQ2FyZCIsInNlbmRMaWtlIiwiZGVsZXRlTGlrZSIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5ncyIsImZvcm0iLCJfZm9ybVNlbGVjdG9yIiwiZm9ybVNlbGVjdG9yIiwiX2lucHV0U2VsZWN0b3IiLCJpbnB1dFNlbGVjdG9yIiwiX3N1Ym1pdEJ1dHRvblNlbGVjdG9yIiwic3VibWl0QnV0dG9uU2VsZWN0b3IiLCJfaW5hY3RpdmVCdXR0b25DbGFzcyIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJfaW5wdXRFcnJvckNsYXNzIiwiaW5wdXRFcnJvckNsYXNzIiwiX2Vycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiX3BvcHVwRm9ybSIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiX3NhdmVCdG4iLCJfaXNWYWxpZCIsImlucHV0IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oaWRlSW5wdXRFcnJvciIsIl9zaG93SW5wdXRFcnJvciIsImZvcm1FcnJvciIsImlkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJmb3JFYWNoIiwiZW5hYmxlVmFsaWRhdGlvbiIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiZGlzYWJsZUJ1dHRvbiIsImRpc2FibGVkIiwiX2VuYWJsZUJ1dHRvbiIsIl9oYXNJbnB1dHNWYWxpZCIsInJlc2V0VGV4dEVycm9yIiwiaXRlbSIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsImRvY3VtZW50IiwiX2Nsb3NlQnRuIiwiX2hhbmRsZUVzY0Nsb3NlIiwiYmluZCIsIm9wZW4iLCJjbG9zZSIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJfY2xvc2VQcmVzc092ZXJsYXkiLCJjdXJyZW50VGFyZ2V0IiwidGFyZ2V0Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJQb3B1cFdpdGhGb3JtIiwiYXBpQ2FsbEJhY2siLCJzdXBlciIsIl9pbnB1dHNMaXN0IiwiX2Zvcm0iLCJfYXBpQ2FsbEJhY2siLCJfc3VibWl0QnRuIiwiX2dldElucHV0VmFsdWVzIiwiX2RhdGEiLCJ2YWx1ZSIsInN1Ym1pdEhhbmRsZXIiLCJyZXNldCIsImluZm8iLCJsb2FkaW5nSW5Qcm9jZXNzIiwibG9hZGluZ0RvbmUiLCJ0ZXh0IiwiZm9ybUVsZW1lbnRQcm9maWxlIiwiZm9ybU5ld1BsYWNlIiwiZm9ybUF2YXRhckVkaXQiLCJjYXJkVGVtcGxhdGUiLCJwcm9maWxlT3BlbkJ0biIsImNhcmRBZGRCdG4iLCJhdmF0YXJFZGl0QnRuIiwibmFtZUlucHV0Iiwiam9iSW5wdXQiLCJmb3JtVmFsaWRhdGlvblByb2ZpbGUiLCJmb3JtVmFsaWRhdGlvbk5ld0NhcmQiLCJmb3JtVmFsaWRhdGlvbkF2YXRhciIsImFwaSIsImJhc2VVcmwiLCJoZWFkZXJzIiwiX3VybCIsIl9oZWFkZXJzIiwiZ2V0SW5mbyIsImZldGNoIiwibWV0aG9kIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwiZ2V0Q2FyZHMiLCJzZW5kTmV3UHJvZmlsZURhdGEiLCJkYXRhIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJzZW5kTmV3Q2FyZERhdGEiLCJkZWxldGVDYXJkIiwiY2hhbmdlQXZhdGFyIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImF1dGhvcml6YXRpb24iLCJhbGwiLCJ1c2VySW5mbyIsImNhcmRzIiwiY2FyZCIsImluaXRpYWxDYXJkc0xpc3QiLCJyZW5kZXJlckNhcmRzIiwidXNlciIsInNldFVzZXJJbmZvIiwic2V0VXNlckF2YXRhciIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsInN1Ym1pdFBvcHVwIiwiX3N1Ym1pdCIsInNldFN1Ym1pdEFjdGlvbiIsInN1Ym1pdEFjdGlvbiIsIl9oYW5kbGVTdWJtaXRDYWxsYmFjayIsInN1Ym1pdCIsImRpc2FibGVTdWJtaXRCdG4iLCJlbmFibGVTdWJtaXRCdG4iLCJwb3B1cEF2YXRhckVkaXQiLCJmaW5hbGx5IiwibmFtZVNlbGVjdG9yIiwib2NjdXBhdGlvblNlbGVjdG9yIiwiYXZhdGFyU2VsZWN0b3IiLCJfb2NjdXBhdGlvbiIsIl9hdmF0YXIiLCJnZXRVc2VySW5mbyIsImFib3V0IiwiYXZhdGFyIiwicG9wdXBQcm9maWxlRWRpdCIsInBvcHVwQWRkTmV3Q2FyZCIsImFkZEl0ZW0iLCJjcmVhdGVOZXdDYXJkSnVzdCIsImRlbGV0ZUNhcmRBcGkiLCJpbWFnZVByZXZpZXciLCJfaW1hZ2UiLCJfY2FwdGlvbiIsImNhcmRQaWMiLCJyZW5kZXJlciIsImNvbnRhaW5lclNlbGVjdG9yIiwiX3JlbmRlcmVyIiwiX2NvbnRhaW5lciIsInJldmVyc2UiLCJwcmVwZW5kIiwiYXJnIiwic2VuZEFyZ1RvQ2xhc3NDYXJkIl0sInNvdXJjZVJvb3QiOiIifQ==